<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Web of Things (WoT) Scripting API</title>
    <script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
    <script class='remove'>
      // See https://github.com/w3c/respec/wiki/ for how to configure ReSpec
      var respecConfig = {
        specStatus: "ED",
        shortName: "wot-scripting-api",
        copyrightStart:       2017,
        noLegacyStyle:        true,
        publishDate:          "",
        previousPublishDate:  "",
        previousMaturity:     "",
        edDraftURI:           "https://w3c.github.io/wot-scripting-api/",
        crEnd:                "",
        inlineCSS:            true,
        noIDLIn:              true,
        format:               'markdown',
        editors: [
          { name: "Zoltan Kis", company: "Intel", companyURL: "https://www.intel.com/" },
          { name: "Kazuaki Nimura", company: "Fujitsu Ltd.", companyURL: "https://www.fujitsu.com/" },
          { name: "Daniel Peintner", company: "Siemens AG", companyURL: "https://www.siemens.com/" },
          { name: "Johannes Hund", note: "Former Editor, when at Siemens AG" },
        ],
        wg:           "Web of Things Working Group",
        wgURI:        "https://www.w3.org/WoT/WG/",
        wgPublicList: "public-wot-wg",
        issueBase: "https://www.github.com/w3c/wot-scripting-api/issues/",
        githubAPI: "https://api.github.com/repos/w3c/wot-scripting-api",
        otherLinks: [
          {
            key: "Contributors",
            data: [
                {
                  value: "In the GitHub repository",
                  href: "https://github.com/w3c/wot-scripting-api/graphs/contributors"
                }
            ]
          },
          {
            key: "Repository",
            data: [{
                  value: "We are on GitHub",
                  href: "https://github.com/w3c/wot-scripting-api"
              }, {
                  value: "File a bug",
                  href: "https://github.com/w3c/wot-scripting-api/issues"
              },
            ]
          },
        ],
        localBiblio: {
          "WOT-ARCHITECTURE" : {
            href:"https://w3c.github.io/wot-architecture/",
            title: "Web of Things Architecture",
            publisher: "W3C",
            date: "20 August 2017"
          },
          "WOT-TD" : {
            href:"https://w3c.github.io/wot-thing-description/",
            title: "WoT Thing Description ",
            publisher: "W3C",
            date: "20 August 2017"
          },
          "WOT-PROTOCOL-BINDINGS" : {
            href:"https://w3c.github.io/wot-binding-templates/",
            title: "Web of Things Protocol Binding Templates",
            publisher: "W3C",
            date: "20 August 2017"
          },
          "WOT-PRACTICES": {
            href:"http://w3c.github.io/wot/current-practices/wot-practices.html",
            title: "Web of Things Current Practices",
            publisher: "W3C",
            date: "6 February 2017"
          },
          "TYPESCRIPT": {
            href:"https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md",
            title: "TypeScript Language Specification",
            publisher: "Microsoft",
            date: "1 October 2012"
          },
          "WEBAPPSEC": {
            href:"https://w3c.github.io/webappsec/specs/powerfulfeatures",
            title: "Secure Contexts",
            publisher: "W3C",
            date: "17 July 2015"
          },
        },
      };
    </script>
  </head>
  <body>

  <section id="abstract">
    <p>
      The <a>Web of Things</a> (WoT) provides layered interoperability between <a>Things</a> by using the <a>WoT Interface</a>s.
    </p>
    <p>
      This specification describes a programming interface representing the <a>WoT Interface</a> that allows scripts run on a <a>Thing</a> to discover and consume (retrieve) other <a>Thing</a>s and to expose <a>Things</a> characterized by <a> WoT Interactions</a>, i.e. <a>Properties</a>, <a>Actions</a> and <a>Events</a>.
    </p>
    <p>
      Scripting is an optional "convenience" building block in WoT and it is typically used in gateways that are able to run a <a>WoT Runtime</a> and <a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/script-manager">script management</a>, providing a convenient way to extend WoT support to new types of endpoints and implement WoT applications like <a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/thing-directory">Thing Directory</a>.
    </p>
  </section>

  <section id="sotd">
    <p>
      Implementers need to be aware that this specification is considered unstable. Vendors interested in implementing this specification before it eventually reaches the Candidate Recommendation phase should subscribe to the [repository](https://github.com/w3c/wot-scripting-api) and take part in the discussions.
    </p>
    <p class="ednote" title="The W3C WoT WG is asking for feedback">
      Please contribute to this draft using the <a href="https://github.com/w3c/wot-scripting-api/issues">GitHub Issue</a> feature of the <a href="https://github.com/w3c/wot-scripting-api/">WoT Scripting API</a> repository.
      For feedback on security and privacy considerations, please use the <a href="https://github.com/w3c/wot-security/issues">WoT Security and Privacy</a> Issues.
    </p>
  </section>

  <section id="introduction"> <h2>Introduction</h2>
    <p>
      The overall WoT concepts are described in the [WoT Architecture](https://w3c.github.io/wot-architecture/) document.
      The Web of Things is made of entities (<a>Thing</a>s) that can describe their capabilities in a machine-interpretable format, the <a>Thing Description</a> (TD) and expose these capabilities through the <a>WoT Interface</a>. Support for scripting is optional for WoT devices.
    </p>
    <p>
      By <a>consuming a TD</a>, a client <a>Thing</a> creates a runtime resource model that allows accessing the properties, <a>Actions</a> and <a>Events</a> exposed by the server <a>Thing</a>.
    </p>
    <p>
      Exposing a <a>Thing</a> requires defining a <a>Thing Description</a> (TD) and instantiating a software stack needed to serve requests for accessing the exposed properties, <a>Actions</a> and <a>Events</a>. Defining a This specification describes how to expose and consume <a>Thing</a>s by a script.
    </p>
    <p class="note">
      Typically scripts are meant to be used on devices able to provide resources (with a <a>WoT interface</a>) for managing (installing, updating, running) scripts, such as bridges or gateways that expose and control simpler devices as WoT <a>Thing</a>s.
    </p>
    <p>
      For an introduction on how scripts could be used in <a>Web of Things</a>, check the [Primer](https://w3c.github.io/wot-scripting-api/primer) document. For some background on API design decisions check the [Rationale](https://w3c.github.io/wot-scripting-api/rationale) document.
    </p>
  </section>

  <section class="informative"> <h3>Use Cases</h3>
    <p>
      The following scripting use cases are covered in this specification:
    </p>
    <section><h4>Discovery</h4>
    <ul>
      <li>Discover all <a>Thing</a>s in the WoT network by sending a broadcast request.</li>
      <li>Discover <a>Thing</a>s running in the local <a>WoT Runtime</a>.</li>
      <li>Discover nearby <a>Thing</a>s, for instance by NFC or Bluetooth.</li>
      <li>Discover <a>Thing</a>s by sending a discovery request to a given registry.</li>
      <li>Discover <a>Thing</a>s by filters defined on <a>Thing Description</a>s</li>
      <li>Discover <a>Thing</a>s by semantic filters.</li>
      <li>Stop or suppress an ongoing discovery process.</li>
      <li>
          Optionally specify a timeout to the discovery process after which it is stopped/suppressed.
      </li>
    </ul>
    </section>
    <section><h4>Consuming a Thing</h4>
    <ul>
      <li>
        Fetch and <a>consume a TD</a> of a <a>Thing</a>. The <a>TD</a> may be provided in a string serialized format, or specified by a URL. Consuming the <a>Thing</a> includes parsing the <a>TD</a> and attaching to the protocol bindings in order to access lower level functionality.
      </li>
      <li>On a consumed <a>Thing</a>,
        <ul>
          <li>Get the value of a <a>Property</a> or set of properties.</li>
          <li>Observe value changes to a <a>Property</a>.</li>
          <li>Set the value of a <a>Property</a> or a set of properties.</li>
          <li>Invoke an <a>Action</a>.</li>
          <li>Observe <a>Events</a> emitted by the <a>Thing</a>.</li>
          <li>Observe changes to the <a>Thing Description</a> of the <a>Thing</a>.</li>
        </ul>
      </li>
    </ul>
    </section>
    <section><h4>Exposing a Thing</h4>
    <ul>
      <li>
        Exposing the <a>Thing</a> includes attaching to the protocol bindings in order to access lower level functionality.
      </li>>
      <li>
        Create a local <a>ExposedThing</a> to be exposed, based on a <a>Thing Description</a> provided in string serialized format, or out of a template or an existing <a>ConsumedThing</a> object.</li>
      <li>Add a <a>Property</a> definition to the <a>Thing</a>.</li>
      <li>Add an <a>Event</a> definition to the <a>Thing</a>.</li>
      <li>Add an <a>Action</a> definition to the <a>Thing</a>.</li>
      <li>Attach semantic information to an <a>Action</a></li>
      <li>Attach semantic information to a <a>Property</a></li>
      <li>Attach semantic information to an <a>Event</a></li>
      <li>
        Emit an <a>Event</a>, i.e. notify all listeners subscribed to that <a>Event</a>.
      </li>
      <li>
        Provide notifications for TD changes to clients subscribed to that.
      </li>
      <li>Mark/unmark the Thing to be discoverable.</li>
      <li>Mark/unmark the Thing to be consumable.</li>
      <li>Start the exposed <a>Thing</a> in order to process external requests.</li>
      <li>Stop the exposed <a>Thing</a>.</li>
      <li>Register handlers for external requests:
        <ul>
          <li>to retrieve a <a>Property</a> value;</li>
          <li>to update a <a>Property</a> value;</li>
          <li>
            to run an <a>Action</a>: take the parameters from the request, execute the defined action, and return the result;
          </li>
          <li>to add a listener to an <a>Event</a>;</li>
          <li>to remove an <a>Event</a> listener.</li>
          <li>to fetch the <a>Thing Description</a>;</li>
        </ul>
      </li>
    </ul>
    </section>
    <section><h4>Future use cases</h4>
    <p>
      The following use cases are being considered out of scope for this version:
    </p>
    <ul>
      <li>
        Deploy, start, stop, delete scripts in local or remote runtimes in order to implement Thing lifecycle management.
      </li>
    </ul>
    <p class="ednote">
      Management use cases should be solved with exposing a special Thing that has an action for creating a <a>Thing</a> based on a <a>TD</a>.
    </p>
    </section>
  </section>

  <section data-dfn-for="WoT">
    <h2>The <dfn>WoT</dfn> object</h2>
    <p>The WoT object is the main API entry point and it is exposed by an implementation of the <a>WoT Runtime</a>. The <dfn>WoT object</dfn> has no internal state and provides methods for discovering, consuming and exposing a <a>Thing</a>.
    </p>
    <p class="note">
       Browser implementations SHOULD use a namespace object such as `wot`, and [Node.js](https://nodejs.org/en/)-like runtimes MAY provide the API object through the [`require()`](https://nodejs.org/api/modules.html) or [`import`](http://www.ecma-international.org/ecma-262/6.0/#sec-imports) mechanism.
    </p>
    <pre class="idl">
      // [SecureContext]
      // [NamespaceObject]
      interface WoT {
        Observable&lt;ConsumedThing&gt; discover(optional ThingFilter filter);
        Promise&lt;ThingDescription&gt; fetch(USVString url);
        ConsumedThing consume(ThingDescription td);
        ExposedThing produce(optional ThingModel model);
      };
      typedef USVString ThingDescription;
      typedef (ThingTemplate or ThingDescription) ThingModel;
    </pre>

    <p class="ednote">
      The algorithms for the WoT methods will be specified later.
    </p>

    <section> <h3>The <dfn>discover()</dfn> method</h3>
      <p>
        Starts the discovery process that will provide <code><a>ConsumedThing</a></code> objects that match the optional argument <code><a>ThingFilter</a></code>. When the argument is not provided, starts the widest discovery the <a>Thing Description</a> and <a>Protocol Bindings</a> allow and support.
        Returns an [<code>Observable</code>](https://github.com/tc39/proposal-observable) object that can be subscribed to and unsubscribed from.
      </p>

      <section data-dfn-for="DiscoveryMethod">
        <h4>The <dfn>DiscoveryMethod</dfn> enumeration</h4>
        <pre class="idl">
          typedef DOMString DiscoveryMethod;
        </pre>
        <p>
          <a>DiscoveryMethod</a> represents the discovery type to be used:
          <ul>
            <li><dfn>"any"</dfn> does not provide any restriction</li>
            <li><dfn>"local"</dfn> for discovering <a>Thing</a>s defined in the same device</li>
            <li>
              <dfn>"nearby"</dfn> for discovering <a>Thing</a>s nearby the device, e.g. by Bluetooth or NFC
            </li>
            <li>
              <dfn>"directory"</dfn> for discovery based on a service provided by a directory or repository of <a>Thing</a>s
            </li>
            <li>
              <dfn>"broadcast"</dfn> for an open ended discovery based on sending a request to a broadcast address
            </li>
            <li>
              <dfn>"other"</dfn> for a proprietary method defined by the solution.
            </li>
          </ul>
        </p>
      </section>

      <section data-dfn-for="ThingFilter">
        <h4>The <dfn>ThingFilter</dfn> dictionary</h4>
        <p>
          The <a>ThingFilter</a> dictionary that represents the constraints for discovering <a>Thing</a>s as key-value pairs.
        </p>
        <pre class="idl">
          dictionary ThingFilter {
            DiscoveryMethod method = "any";
            USVString url;
            USVString query;
            sequence&lt;Dictionary&gt; constraints;
          };
        </pre>
        <p>
          The <dfn>method</dfn> property represents the discovery type that should be used in the discovery process. The possible values are defined by the <code><a>DiscoveryMethod</a></code> enumeration that can be extended by string values defined by solutions (with no guarantee of interoperability).
        </p>
        <p>
          The <dfn>url</dfn> property represents additional information for the discovery method, such as the URL of the target entity serving the discovery request, such as a <a>Thing Directory</a> or a Thing.
        </p>
        <p>
          The <dfn>query</dfn> property represents a query string accepted by the implementation, for instance a SPARQL query.
        </p>
        <p>
          The <dfn>constraints</dfn> property represents additional information for the discovery method in the form of a list of sets of key-value pairs, defined based on the semantic metadata of the <a>Thing Description</a>. The sequence elements are in OR relationship, and within an element the key-value pairs define AND type constraints.
        </p>
        <p class="ednote">
          The <a>DiscoveryMethod</a> enumeration can be extended by the <a>Thing Description</a> with values that are not specified here. This extensibility of <a>DiscoveryMethod</a> by proprietary or private methods is a working assumption until consensus is formed and may be removed later.
        </p>
        <p class="ednote">
          The <a>ThingFilter</a> dictionary may be extended later with further attributes.</p>
        </p>
      </section>
    </section> <!-- Discovery -->

    <section> <h3> The <dfn>fetch()</dfn> method</h3>
      <p>
        Accepts an <code>url</code> argument and returns a <code><a>Promise</a></code> that resolves with a <a>ThingDescription</a>.
      </p>
    </section>

    <section data-dfn-for="ThingDescription">
    <h3>The <dfn>ThingDescription</dfn> type</h3>
      <p>
        Representation of the <a>Thing Description</a>, standardized in the [Wot Things Description](https://w3c.github.io/wot-thing-description/) specification.
      </p>
      <p class="note">
        In this version of the API, <a>Thing Description</a>s are represented as opaque strings, denoting a serialized form, for instance JSON or JSON-LD. See [Issue 38](https://github.com/w3c/wot-scripting-api/issues/38) and [Issue 45](https://github.com/w3c/wot-scripting-api/issues/45).
        Parsing and composing <a>Thing Description</a>s is left for external libraries until standardized here.
      </p>
    </section>

    <section> <h3> The <dfn>consume()</dfn> method</h3>
      <p>
        Accepts an <code>td</code> argument of type <code><a>ThingDescription</a></code> and returns a <a>ConsumedThing</a> object instantiated based on that description.
      </p>
    </section>

    <section> <h3>The <dfn id="produce-method">produce()</dfn> method</h3>
      <p>
        Accepts an optional <code>model</code> argument of type <code><a>ThingModel</a></code> and returns an <a>ExposedThing</a> object, locally created based on the provided initialization parameters. An <a>ExposedThing</a> can be created in the following ways:
        <ul>
          <li>
            from an initial model (name and semantic annotations), then adding properties, actions, events and request handlers;
          </li>
          <li>
            from a <a>Thing Description</a>, then adding request handlers;
          </li>
          <li>
            from an existing <a>ConsumedThing</a> object, based on its <a>Thing Description</a>, then adding request handlers.
          </li>
        </ul>
      </p>
    </section> <!-- produce() -->

    <section data-dfn-for="ThingModel" >
    <h3>The <dfn>ThingModel</dfn> type</h3>
    <p>
      A Thing model is used for producing a new <a>ExposedThing</a> and can be either a <a>ThingTemplate</a>, or a <a>ThingDescription</a>.
    </p>
    </section>

    <section data-dfn-for="SemanticAnnotations" >
      <h3>The <dfn>SemanticAnnotations</dfn> dictionary</h3>
      <p>
        A dictionary that provides the semantic types and semantic metadata.
      </p>
      <pre class="idl">
        dictionary SemanticAnnotations {
            sequence&lt;SemanticType&gt; semanticTypes;
            sequence&lt;SemanticMetadata&gt; metadata;
        };
      </pre>
      <p>
        The <dfn>semanticTypes</dfn> property denotes a list of <a>SemanticType</a> objects that define the semantic types that can be used in semantic metadata type-value pairs.
      </p>
      <p>
        The <dfn>metadata</dfn> property denotes a list of <a>SemanticMetadata</a> objects (type-value pairs).
      </p>
    </section> <!-- SemanticAnnotations -->

    <section data-dfn-for="SemanticType" >
      <h3>The <dfn>SemanticType</dfn> dictionary</h3>
      <pre class="idl">
        dictionary SemanticType {
            DOMString name;
            USVString context;
            DOMString prefix;
        };
      </pre>
      <p>
        Represents a semantic type annotation, containing a name, a context and a prefix.
        <ul>
          <li>
            The <dfn>name</dfn> attribute represents the name of the semantic type in the given context.
          </li>
          <li>
            The <dfn>context</dfn> attribute represents an URL link to the context of the semantic classification.
          </li>
          <li>
            The <dfn>prefix</dfn> attribute represents a short prefix associated with a context.
          </li>
        </ul>
      </p>
      <p class="ednote">
        Semantic type examples to be added.
      </p>
    </section> <!-- SemanticType -->

    <section data-dfn-for="SemanticMetadata" >
      <h3>The <dfn>SemanticMetadata</dfn> dictionary</h3>
      <pre class="idl">
        dictionary SemanticMetadata {
            SemanticType type;
            any          value;
        };
      </pre>
      <p>The <a>SemanticMetadata</a> dictionary describes a pair of semantic type and value:
        <ul>
          <li>
            The <dfn>type</dfn> attribute represents the semantic type name defined by a <a>SemanticType</a> object.
          </li>
          <li>The <dfn>value</dfn> attribute represents the metadata value.</li>
        </ul>
      </p>
    </section> <!-- SemanticMetadata -->

    <section data-dfn-for="ThingTemplate" >
      <h3>The <dfn>ThingTemplate</dfn> dictionary</h3>
      <p>
        A Thing Template is a dictionary that provides the semantic types and semantic metadata at the <a>ExposedThing</a> description's root level.
      </p>
      <pre class="idl">
        dictionary ThingTemplate: SemanticAnnotations {
            DOMString name;
        };
      </pre>
      <p>The <a>ThingTemplate</a> dictionary extends <a>SemanticAnnotations</a> and contains properties to initialize a <a>Thing</a>:
        <ul>
          <li>
            The <dfn>name</dfn> attribute represents the user given name of the <a>Thing</a>.
          </li>
        </ul>
      </p>
      <p class="ednote">
        Support for configuration and security data might be added later.
      </p>
    </section> <!-- ThingTemplate -->

    <section> <h3>Examples</h3>
      <pre class="example" title="Discover Things via directory">
        let discoveryFilter = { method: "directory", url: "http://directory.wotservice.org" };
        let subscription = wot.discover(discoveryFilter).subscribe(
          thing => { console.log("Found Thing " + thing.url); },
          error => { console.log("Discovery finished because an error: " + error.message); },
          () => { console.log("Discovery finished successfully");}
        );
        setTimeout(
          () => { subscription.unsubscribe(); console.log("Discovery timeout"); },
          5000);
      </pre>
      <p class="note">
        Note that canceling a discovery (through unsubscribe) may not be successful in all cases, for instance when discovery is based on open ended broadcast requests. However, once `unsubscribe()` has been called,  implementations MUST suppress further event handling ( i.e. further discoveries and errors) on the Observable. Also, a discovery error may not mean the end of the discovery process. However, in order to respect Observable semantics (error always terminates processing), implementations MUST close or suppress further event handling on the Observable.
      </p>
      <pre class="example" title="Discover Things exposed by local hardware">
        let subscription = wot.discover({ method: "local" }).subscribe(
          thing => { console.log("Found local Thing " + thing.url); },
          error => { console.log("Discovery error: " + error.message); },
          () => { console.log("Discovery finished successfully");}
        );
      </pre>
      <pre class="example" title="Discover Things exposed nearby, e.g. via Bluetooth">
        let subscription = wot.discover({ method: "nearby", description: {protocol: "BLE4.2"} }).subscribe(
          thing => { console.log("Found nearby Thing " + thing.url); },
          error => { console.log("Discovery error: " + error.message); },
          () => { console.log("Discovery finished successfully");}
        );
      </pre>
      <pre class="example" title="Discover Things exposed in a proprietary way">
        let subscription = wot.discover({ method: "other", description: { solution: "XYZ123", key: "..."} }).subscribe(
          thing => { console.log("Found Thing " + thing.url); },
          error => { console.log("Discovery error: " + error.message); },
          () => { console.log("Discovery finished successfully");}
        );
      </pre>
    </section> <!-- Examples -->
  </section> <!-- WoT API -->

  <section data-dfn-for="ConsumedThing">
    <h2>The <dfn>ConsumedThing</dfn> interface</h2>
    <p>
      The <a>ConsumedThing</a> interface is a client API for sending requests to servers in order to retrieve or update properties, invoke <a>Actions</a>, and observe properties, <a>Actions</a> and <a>Events</a>.
    </p>
    <pre class="idl">
      interface ConsumedThing {
        readonly attribute DOMString name;
        readonly attribute ThingDescription td;
        Promise&lt;any&gt; invokeAction(DOMString name, any parameters);
        Promise&lt;void&gt; writeProperty(DOMString name, any value);
        Promise&lt;any&gt; readProperty(DOMString name);
        Observable&lt;ThingEventListener&gt; onEvent(DOMString name);
        Observable&lt;PropertyChangeListener&gt; onPropertyChange(DOMString name);
        Observable&lt;TDChangeListener&gt; onTDChange();
      };
      callback ThingEventListener = void (ThingEvent event);
      callback PropertyChangeListener = void (DOMString name, any value);
      callback TDChangeListener = void (optional ThingDescription td);
    </pre>
    <p>
      Represents a local proxy object of the remote <a>Thing</a>.
      <ul>
        <li>The <dfn>name</dfn> read-only attribute represents the name of the <a>Thing</a>.</li>
        <li>
          The <dfn>td</dfn> attribute read-only attribute represents the description of the <a>Thing</a>.
          <p class="ednote">
            Parsing and exposing <a>Thing Description</a>s is discussed in [Issue 38](https://github.com/w3c/wot-scripting-api/issues/38).</p>
        </li>
      </ul>
    </p>

    <section> <h3>The <dfn>invokeAction()</dfn> method</h3>
      <p>
        Takes the <a>Action</a> name from the <var>name</var> argument and the list of parameters, then requests from the underlying platform and the <a>Protocol Bindings</a> to invoke the <a>Action</a> on the remote <a>Thing</a> and return the result. Returns a <code><a>Promise</a></code> that resolves with the return value or rejects with an <a>Error</a>.
      </p>
    </section>

    <section> <h3>The <dfn>writeProperty()</dfn> method</h3>
      <p>
        Takes the <a>Property</a> name as the <var>name</var> argument and the new value as the <var>value</var> argument, then requests from the underlying platform and the <a>Protocol Bindings</a> to update the <a>Property</a> on the remote <a>Thing</a> and return the result. Returns a <code><a>Promise</a></code> that resolves on success or rejects with an <a>Error</a>.
      </p>
    </section>

    <section> <h3>The <dfn>readProperty()</dfn> method</h3>
      <p>
        Takes the <a>Property</a> name as the <var>name</var> argument, then requests from the underlying platform  and the <a>Protocol Bindings</a> to retrieve the <a>Property</a> on the remote <a>Thing</a> and return the result. Returns a <code><a>Promise</a></code> that resolves with the <a>Property</a> value or rejects with an <a>Error</a>.
      </p>
    </section>

    <section> <h3>The <dfn>onEvent()</dfn> method</h3>
      <p>
        Returns an <a>Observable</a> for the <a>Property</a>, <a>Event</a> or <a>Action</a> specified in the <var>name</var> argument, allowing subscribing to and unsubscribing from notifications. Takes an argument of type <a>ThingEventListener</a>.
      </p>
    </section>

    <section> <h3>The <dfn>onPropertyChange()</dfn> method</h3>
      <p>
        Returns an <a>Observable</a> for the <a>Property</a> specified in the <var>name</var> argument, allowing subscribing to and unsubscribing from notifications. Takes an argument of type <a>PropertyChangeListener</a>.
      </p>
    </section>

    <section> <h3>The <dfn>onTDChange()</dfn> method</h3>
      <p>
        Returns an <a>Observable</a>, allowing subscribing to and unsubscribing from notifications to the <a>Thing Description</a>. Takes no arguments.
      </p>
    </section>

    <section data-dfn-for="PropertyChangeListener">
      <h2>The <dfn>PropertyChangeListener</dfn> callback</h2>
      <p>
        A function called with an <code>name</code> argument of type string that denotes the changed property name, and a <code>value</code> argument that denotes the new property value.
      </p>
    </section>

    <section data-dfn-for="TDChangeListener">
      <h2>The <dfn>TDChangeListener</dfn> callback</h2>
      <p>
        A function called with one optional argument of type <a>ThingDescription</a> that denotes the new <a>Thing Description</a>.
      </p>
    </section>

    <section data-dfn-for="ThingEventListener">
      <h2>The <dfn>ThingEventListener</dfn> callback</h2>
      <p>
        A function called with an <a>ThingEvent</a> object.
      </p>
    </section>

    <section data-dfn-for="ThingEvent">
      <h3>The <dfn>ThingEvent</dfn> interface</h3>
      <p>
        Clients can subscribe to the <a>Events</a> defined in <a href="#events-supported-by-exposedthing">ExposedThing events</a>. The event types are described in this section.
      </p>
      <pre class="idl">
        [Constructor(DOMString name, any data)]
        interface ThingEvent {
          readonly attribute DOMString name;
          readonly attribute any data;
        };
      </pre>
      <p>
        The <dfn for="ThingEvent">name</dfn> attribute represents the <a>Event</a> name.
      </p>
      <p>
        The <dfn>data</dfn> attribute represents the data attached to the event. The data type and values are defined in the <a>Thing Description</a> of the remote <a>ExposedThing</a> that exposes the event.
      </p>
    </section> <!-- ThingEvent -->

    <section>
      <h2>Examples</h2>
      <p>
        Below a <code><a>ConsumedThing</a></code> interface example is given.
      </p>
      <pre class="example" title="Consume a Thing">
        wot.fetch("http://mmyservice.org/mySensor")
        .then(td) => { consume(td)
        .then(thing => {
            console.log("Thing " + thing.name + " has been consumed.");
            let subscription = thing.onPropertyChange("temperature")
              .subscribe(function(name, value) {
                console.log("Property " + name + " value has changed to " + value);
              });
            thing.invokeAction("startMeasurement", { units: "Celsius" })
              .then(() => { console.log("Temperature measurement started."); })
              .catch(e => {
                 console.log("Error starting measurement.");
                 subscription.cancel();
               })
          },
        )}).catch(error => {
          console.log("Error during fetch or consume: " + error.message);
        });
      </pre>
    </section> <!-- Examples -->
  </section> <!-- ConsumedThing -->

  <section data-dfn-for="ExposedThing">
    <h2>The <dfn>ExposedThing</dfn> interface</h2>
    <p>
      The <a>ExposedThing</a> interface is the server API that allows defining request handlers, properties, <a>Actions</a>, and <a>Events</a> to a <a>Thing</a>. It also implements the <a>ConsumedThing</a> interface. An <a>ExposedThing</a> is created by the <a href="#the-produce-method">produce()</a> method.
    </p>
    <p class="ednote">
      It is under consideration to use a constructor for <a>ExposedThing</a> instead of a factory method.
    </p>
    <pre class="idl">
      ExposedThing implements ConsumedThing;
      interface ExposedThing {
        // define how to expose and run the Thing
        Promise&lt;void&gt; start();
        Promise&lt;void&gt; stop();
        Promise&lt;void&gt; register(optional USVString directory);
        Promise&lt;void&gt; unregister(optional USVString directory);
        Promise&lt;void&gt; emitEvent(DOMString eventName, any payload);
        // define Thing Description modifiers
        void addProperty(ThingPropertyInit property);
        void removeProperty(DOMString name);
        void addAction(ThingActionInit action);
        void removeAction(DOMString name);
        void addEvent(ThingEventInit event);
        void removeEvent(DOMString name);
        void setActionHandler(ActionHandler action, optional DOMString actionName);
        void setPropertyReadHandler(PropertyReadHandler readHandler, optional DOMString propertyName);
        void setPropertyWriteHandler(PropertyWriteHandler writeHandler, optional DOMString propertyName);
      };
      callback ActionHandler = Promise&lt;any&gt; (any parameters);
      callback PropertyReadHandler = Promise&lt;any&gt; (DOMString propertyName);
      callback PropertyWriteHandler = Promise&lt;void&gt; (DOMString propertyName, any value);
    </pre>

    <section> <h3>The <dfn>start()</dfn> method</h3>
      <p>
        Start serving external requests for the <a>Thing</a>.
      </p>
    </section>

    <section> <h3>The <dfn>stop()</dfn> method</h3>
      <p>
        Stop serving external requests for the <a>Thing</a>.
      </p>
    </section>

    <section> <h3>The <dfn>register()</dfn> method</h3>
      <p>
        Generates the <a>Thing Description</a> given the properties, <a>Actions</a> and <a>Event</a> defined for this object. If a <code>directory</code> argument is given, make a request to register the <a>Thing Description</a> with the given WoT repository by invoking its <code>register</code> <a>Action</a>.
      </p>
    </section>

    <section> <h3>The <dfn>unregister()</dfn> method</h3>
      <p>
        If a <code>directory</code> argument is given, make a request to unregister the <a>Thing Description</a> with the given WoT repository by invoking its <code>unregister</code> <a>Action</a>. Then, and in the case no arguments were provided to this function, stop the <a>Thing</a> and remove the <a>Thing Description</a>.
      </p>
    </section>

    <section> <h3>The <dfn>emitEvent()</dfn> method</h3>
      <p>
        Emits an the event initialized with the event name specified by the <code>eventName</code> argument and data specified by the <code>payload</code> argument.
      </p>
    </section>

    <section data-dfn-for="ValueType">
      <h4>The <dfn>ValueType</dfn> type</h4>
      <pre class="idl">
        typedef DOMString ValueType;
      </pre>
      <p>
        The <a>ValueType</a> type represents a type name specified in the <a>Thing Description</a>.
      </p>
      <p class="ednote">
        <a>ValueType</a> is under development, currently it is a string that in principle can denote any type supported by the <a>Thing Description</a> and the <a>WoT Runtime</a>, such as <code>"boolean"</code>, <code>"integer"</code>, <code>"number"</code>, <code>"string"</code>, <code>"array"</code>, <code>"object</code>.
      </p>
    </section>

    <section data-dfn-for="ValueTypeDefinition">
      <h4>The <dfn>ValueTypeDefinition</dfn> dictionary</h4>
      <pre class="idl">
        dictionary ValueTypeDefinition {
          ValueType typeName;
        };
      </pre>
      <p>
        Represents a value definition, including type, and possible constraints like minimum value, maximum value, etc.
        <ul>
          <li>
            The <dfn>typeName</dfn> property represents the type name of the value.
        </ul>
      </p>
      <p class="ednote">
        The <a>Thing Description</a> [specification](https://w3c.github.io/wot-thing-description/) supports constraints like range for numbers and array size. These are not yet represented in this version.
      </p>
    </section>

    <section> <h3>The <dfn>addProperty()</dfn> method</h3>
      <p>
        Adds a <a>Property</a> defined by the argument and updates the <a>Thing Description</a>.
      </p>
      <section data-dfn-for="ThingPropertyInit">
        <h4>The <dfn>ThingPropertyInit</dfn> dictionary</h4>
        <pre class="idl">
          dictionary ThingPropertyInit: SemanticAnnotations {
            DOMString name;
            ValueTypeDefinition type;
            any value;
            boolean configurable = false;
            boolean enumerable = true;
            boolean writable = true;
          };
        </pre>
        <p>
          Represents the <a>Thing</a> <a>Property</a> description.
          <ul>
            <li>The <dfn>name</dfn> attribute represents the name of the <a>Property</a>.</li>
            <li>
              The <dfn>type</dfn> attribute represents the type and accepted value range for the <a>Property</a> by a of type <a>ValueTypeDefinition</a> object.
            </li>
            <li>The <dfn>value</dfn> attribute represents the value of the <a>Property</a>.</li>
            <li>
              The <dfn>configurable</dfn> attribute defines whether the <a>Property</a> can be deleted from the object and whether its type can be changed. The default value is <code>false</code>.
            </li>
            <li>
              The <dfn>enumerable</dfn> attribute defines whether the <a>Property</a> can be listed and iterated. The default value is <code>true</code>.
            </li>
            <li>
              The <dfn>writable</dfn> attribute defines whether the <a>Property</a> can be updated. The default value is <code>true</code>.
            </li>
          </ul>
        </p>
      </section>
    </section> <!-- addProperty() -->

    <section> <h3>The <dfn>removeProperty()</dfn> method</h3>
      <p>
        Removes the <a>Property</a> specified by the <code>name</code> argument and updates the <a>Thing Description</a>.
      </p>
    </section>

    <section> <h3>The <dfn>addAction()</dfn> method</h3>
      <p>
        Adds an <a>Action</a> to the <a>Thing</a> object as defined by the <code>action</code> argument of type <a>ThingActionInit</a> and updates the <a>Thing Description</a>.
      </p>
      <section data-dfn-for="ThingActionInit">
        <h4>The <dfn>ThingActionInit</dfn> dictionary</h4>
        <pre class="idl">
          dictionary ThingActionInit: SemanticAnnotations {
            DOMString name;
            sequence&lt;ValueTypeDefinition&gt; inputDataDescription;
            ValueTypeDefinition outputDataDescription;
          };
      </pre>
      <p>
        The <a>ThingActionInit</a> dictionary describes the arguments and the return value.
        <ul>
          <li>The <dfn>name</dfn> attribute provides the <a>Action</a> name.</li>
          <li>The <dfn>inputDataDescription</dfn> attribute provides the description of the input arguments.</li>
          <li>The <dfn>outputDataDescription</dfn> attribute provides the description of the returned data.</li>
        </ul>
      </p>
      </section>
    </section> <!-- addAction -->

    <section> <h3>The <dfn>removeAction()</dfn> method</h3>
      <p>
        Removes the <a>Action</a> specified by the <code>name</code> argument and updates the <a>Thing Description</a>.
      </p>
    </section>

    <section> <h3>The <dfn>addEvent()</dfn> method</h3>
      <p>
        Adds an event to the <a>Thing</a> object as defined by the <code>event</code> argument of type <a>ThingEventInit</a> and updates the <a>Thing Description</a>.
      </p>
      <section data-dfn-for="ThingEventInit">
        <h4>The <dfn>ThingEventInit</dfn> dictionary</h4>
        <pre class="idl">
          dictionary ThingEventInit: SemanticAnnotations {
            DOMString name;
            ValueTypeDefinition dataDescription;
          };
        </pre>
        <ul>
          <li>The <dfn>name</dfn> attribute represents the event name.</li>
          <li>The <dfn>dataDescription</dfn> attribute represents the description of the data that is attached to the event.</li>
        </ul>
      </section>
    </section>

    <section> <h3>The <dfn>removeEvent()</dfn> method</h3>
      <p>
        Removes the event specified by the <code>name</code> argument and updates the <a>Thing Description</a>.
      </p>
    </section>

    <section data-dfn-for="ActionHandler">
      <h3>The <dfn>ActionHandler</dfn> callback</h3>
      <p>
        A function called with any parameters that returns a Promise.
      </p>
    </section>

    <section data-dfn-for="PropertyReadHandler">
      <h3>The <dfn>PropertyReadHandler</dfn> callback</h3>
      <p>
        A function called with a <code>propertyName</code> argument that returns a Promise and resolves it with the value of the <a>Property</a> matching <code>propertyName</code>, or rejects with and error if the property is not found or the value cannot be retrieved.
      </p>
    </section>

    <section data-dfn-for="PropertyWriteHandler">
      <h3>The <dfn>PropertyWriteHandler</dfn> callback</h3>
      <p>
        A function called with a <code>propertyName</code>  and a <code>value</code> argument that returns a Promise and resolves it when the value of the <a>Property</a> matching <code>propertyName</code> is updated with <code>value</code>, or rejects with and error if the property is not found or the value cannot be updated.
      </p>
    </section>

    <section> <h3>The <dfn>setActionHandler()</dfn> method</h3>
      <p>
        Takes a <code>actionName</code> as an optional string argument, and an <code>action</code> argument of type <a>ActionHandler</a>. Sets the handler function for the specified <a>Action</a> matched by <code>actionName</code> if <code>actionName</code> is specified, otherwise sets it for any action. Throws on error.
      </p>
    </section>

    <section> <h3>The <dfn>setPropertyReadHandler()</dfn> method</h3>
      <p>
        Takes a <code>propertyName</code> as an optional string argument, and a <code>readHandler</code> argument of type <a>PropertyReadHandler</a>. Sets the handler function for reading the specified <a>Property</a> matched by <code>propertyName</code> if <code>propertyName</code> is specified, otherwise sets it for reading any property. Throws on error.
      </p>
    </section>

    <section> <h3>The <dfn>setPropertyWriteHandler()</dfn> method</h3>
      <p>
        Takes a <code>propertyName</code> as an optional string argument, and a <code>writeHandler</code> argument of type <a>PropertyWriteHandler</a>. Sets the handler function for writing the specified <a>Property</a> matched by <code>propertyName</code> if the <code>propertyName</code> is specified, otherwise sets it for writing any properties. Throws on error.
      </p>
    </section>

    <section>
      <h2>Examples</h2>
      <p>
        Below some <code><a>ExposedThing</a></code> interface examples are given.
      </p>

      <pre class="example highlight" title="Create a new blank exposed Thing">
        WoT.createExposedThing(thingDescription)
          .then(function(thing) {
            try {
              // manually add properties, actions, and events
              thing.addProperty({
                name: "temperature",
                value: "0",
                type: { typeName: "double" },
                writable: false
                // use default values for the rest
              });

              thing.addEvent({
                name: "onchange",
                outputDataDescription: {
                  type: "double"
                }
              });

              thing.addAction({
                name: "reset",
                action: () => { this.temperature = 0; }
              });

              // add server functionality
              thing.setPropertyReadHandler( propertyName => {
                console.log("Handling read request for " + propertyName);
                return new Promise((resolve, reject) => {
                if (this.hasOwnProperty(propertyName))
                  resolve(this[propertyName]);
                else reject('Property not found');
              });
            } catch(e) {
              console.log("Error");
            }

            thing.start()
            .then (() => { thing.register();})
            .catch((err) => { console.log("Error");});
          });
      </pre>

      <pre class="example highlight" title="Create a new exposed Thing from a TD URI">
        let thingDescription = '{
          "name": "mySensor",
          "url": "http://myservice.org/mySensor/description"
        }';
        WoT.fetch("http://myservice.org/mySensor/description")
        .then(td => {
          let e_thing = WoT.produce(td);
          // properties, actions and events are added based on the TD
          console.log("created " + thing.name });
          // now add the requests handlers
          try {
            e_thing.setPropertyReadHandler(propertyName => {
              console.log("Handling read request for " + propertyName);
              return new Promise((resolve, reject) => {
              if (this.hasOwnProperty(propertyName))
                resolve(this[propertyName]);
              else reject('Property not found');
            });
            e_thing.start();
          } catch(error) {
            console.log("Error");
          }
        }

        });
      </pre>

      <pre class="example highlight" title="Create a new exposed Thing from a Thing Description">
        let thingDescription = '{
          "name": "mySensor",
          "description": {
            "@context": [
              "http://w3c.github.io/wot/w3c-wot-td-context.jsonld",
              "http://w3c.github.io/wot/w3c-wot-common-context.jsonld",
            ],
            "@type": [ "Thing" ],
            "interactions": [
              // ...
            ]
            // ...
          }'
        };
        let e_thing = WoT.produce(thingDescription);
        // properties, actions and events are added based on the TD
        // ...
      </pre>
    </section> <!-- ExposedThing Examples -->
  </section> <!-- ExposedThing -->

  <section> <h2 id="security">Security and Privacy</h2>
    <p class="ednote">
     Please see the <a href="https://github.com/w3c/wot-security/">WoT Security and Privacy</a> repository for work in progress regarding threat models, assets, risks, recommended mitigations, and best practices for security and privacy for systems using the Web of Things. Once complete, security and privacy considerations relevant to the Scripting API will be summarized in this section.
    </p>
  </section>

  <section> <h2>Terminology and conventions</h2>
    <p>
      The generic WoT terminology is defined in [[!WOT-ARCHITECTURE]]: <dfn data-lt="Things">Thing</dfn>, <dfn data-lt="Thing Descriptions">Thing Description</dfn> (in short <dfn>TD</dfn>), <dfn>Web of Things</dfn> (in short <b><i>WoT</i></b>),  <dfn>WoT Interface</dfn>, <dfn>Protocol Bindings</dfn>, <dfn>WoT Runtime</dfn>, <dfn data-lt="consume|consume a TD|consuming a TD">Consuming a Thing Description</dfn>, <dfn>Thing Directory</dfn>, <dfn>WoT Interactions</dfn>, <dfn data-lt="Properties">Property</dfn>, <dfn data-lt="Actions">Action</dfn>, <dfn data-lt="Events|WoT-Event">Event</dfn> etc.
    </p>
    <p class="note">
      In this version of the specification, a <a>WoT Runtime</a> is assumed to run scripts that uses this API to define one or more <a>Thing</a>s that share a common event loop. Script deployment methods are out of scope of this version. In future versions, running multiple scripts (as modules) may be possible, and script deployment MAY be implemented using a manager <a>Thing</a> whose <a>Actions</a> permit script lifecycle management operations.
    </p>
    <p>
      <dfn>JSON-LD</dfn> is defined in [[!JSON-LD]] as a JSON document that is augmented with support for Linked Data by providing a <code>@context</code> property with a defining URI .
      </dd>
    </p>
    <p>
      The terms <a href="http://www.w3.org/TR/url-1/"><dfn>URL</dfn></a> and
      <a href="https://url.spec.whatwg.org/#concept-url-path">
      <dfn>URL path</dfn></a> are defined in [[!URL]].
    </p>
    <p>
      The following terms are defined in [[!HTML5]] and are used in the context of browser implementations:
      <a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">
      <dfn>browsing context</dfn></a>,

      <a href="https://html.spec.whatwg.org/#top-level-browsing-context">
      <dfn>top-level browsing context</dfn></a>,

      <a href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">
      <dfn>global object</dfn></a>,

      <a href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">
      <dfn>incumbent settings object</dfn></a>,

      <a href="https://html.spec.whatwg.org/#document">
      <dfn>Document</dfn></a>,

      <a href="http://www.w3.org/TR/2011/WD-html5-20110113/urls.html#document-base-url">
      <dfn>document base URL</dfn></a>,

      <a href="https://html.spec.whatwg.org/#window">
      <dfn>Window</dfn></a>,

      <a href="https://html.spec.whatwg.org/#windowproxy">
      <dfn>WindowProxy</dfn></a>,

      <a href="https://html.spec.whatwg.org/#origin">
      <dfn>origin</dfn></a>,

      <a href="https://html.spec.whatwg.org/#ascii-serialisation-of-an-origin">
      <dfn>ASCII serialized origin</dfn></a>,

      executing algorithms <a href="https://html.spec.whatwg.org/#in-parallel">
      <dfn>in parallel</dfn></a>,

      <a href="https://html.spec.whatwg.org/#queue-a-task">
      <dfn>queue a task</dfn></a>,

      <a href="https://html.spec.whatwg.org/#task-source">
      <dfn>task source</dfn></a>,

      <a href="https://html.spec.whatwg.org/#the-iframe-element">
      <dfn>iframe</dfn></a>,

      <a href="https://html.spec.whatwg.org/#valid-mime-type">
      <dfn>valid MIME type</dfn></a>.
    </p>
    <p>
      A <a>browsing context</a> refers to the environment in which
      <a>Document</a> objects are presented to the user. A given
      <a>browsing context</a> has a single <code><a>WindowProxy</a></code> object,
      but it can have many <code><a>Document</a></code> objects, with their associated
      <code><a>Window</a></code> objects. The <a>script execution context</a>
      associated with the <i>browsing context</i> identifies the entity which
      invokes this API, which can be a <i>web app</i>, a <i>web page</i>, or an
      <a>iframe</a>.
    </p>
    <p>
      The term
      <a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">
      <dfn>secure context</dfn></a> is defined in [[!WEBAPPSEC]].
    </p>
    <p>
      <a href="https://tc39.github.io/ecma262/#sec-error-objects">
      <dfn>Error</dfn>, <dfn>EvalError</dfn>, <dfn>RangeError</dfn>, <dfn>ReferenceError</dfn>, <dfn>SyntaxError</dfn>, <dfn>TypeError</dfn>, <dfn>URIError</dfn>
      </a>,
      <a href="https://tc39.github.io/ecma262/#sec-execution-contexts">
        <dfn>script execution context</dfn></a>,
      <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">
        <dfn>Promise</dfn></a>,
      <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json-object">
        <dfn>JSON</dfn></a>,
      <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json.stringify">
        <dfn>JSON.stringify</dfn></a> and
      <a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json.parse">
        <dfn>JSON.parse</dfn></a>
      are defined in [[!ECMASCRIPT]].
    </p>
    <p>
      <a href="http://heycam.github.io/webidl/#idl-DOMString"><dfn>DOMString</dfn></a>,
      <a href="https://heycam.github.io/webidl/#idl-USVString"><dfn>USVString</dfn></a>,
      <a href="http://heycam.github.io/webidl/#idl-ArrayBuffer"><dfn>ArrayBuffer</dfn></a>,
      <a href="http://heycam.github.io/webidl/#common-BufferSource"><dfn>BufferSource</dfn></a> and
      <a href="http://heycam.github.io/webidl/#idl-any"><dfn>any</dfn></a> are defined in [[!WEBIDL]].
    </p>
    <p>
      <a href="https://github.com/tc39/proposal-observable"><dfn>Observable</dfn>s</a> are proposed to be included in ECMAScript.
    </p>
    <p>
      The algorithms <a href="http://www.w3.org/TR/encoding/#utf-8-encode">
      <dfn>utf-8 encode</dfn></a>, and
      <a href="http://www.w3.org/TR/encoding/#utf-8-decode">
      <dfn>utf-8 decode</dfn></a> are defined in [[!ENCODING]].
    </p>
    <p>
      <dfn>IANA media type</dfn>s (formerly known as MIME types) are defined in
      <a href="http://tools.ietf.org/html/rfc2046">RFC2046</a>.
    </p>
  </section>

  <section id="conformance">
    <p>
      This document defines conformance criteria that apply to a single product: the <dfn>UA</dfn> (user agent) that implements the interfaces it contains.
    </p>
    <p>
      This specification can be used for implementing the WoT Scripting API in multiple programming languages. The interface definitions are specified in [[!WEBIDL]].
    </p>
    <p>
      The user agent (UA) may be implemented in the browser, or in a separate runtime environment, such as [Node.js](https://nodejs.org/en/) or small embedded runtimes.
    </p>
    <p>
      Implementations that use ECMAScript executed in a browser to implement the APIs defined in this document MUST implement them in a manner consistent with the ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]].
    </p>
    <p>
      Implementations that use TypeScript or ECMAScript in a runtime to implement the APIs defined in this document MUST implement them in a manner consistent with the TypeScript Bindings defined in the TypeScript specification [[!TYPESCRIPT]].
    </p>
    <p>
      This document serves a general description of the WoT Scripting API. Language and runtime specific issues are discussed in separate extensions of this document.
    </p>
  </section>

  <section class="appendix" id="Changes"><h2>Changes</h2>
    <p>
      The following is a list of major changes to the document. For a complete list of changes, see the [github change log](https://github.com/w3c/wot-scripting-api/commits/master). You can also view the [recently closed bugs](https://github.com/w3c/wot-scripting-api/issues?page=1&amp;state=closed).
    </p>
  </section>

  <section> <h3 class="appendix" id="openissues">Open issues</h3>
    <p>
      The following problems are being discussed and need most attention:
    </p>
      <ul>
        <li> Retrieving information from Thing Description (https://github.com/w3c/wot-scripting-api/issues/38) </li>
        <li> Script management and runtime related issues (https://github.com/w3c/wot-scripting-api/issues/) </li>
      </ul>
  </section>

  <section> <h2>Acknowledgements</h2>
    <p>
      Special thanks to former editor Johannes Hund (until August 2017, when at Siemens AG) for developing this specification. Also, the editors would like to thank Dave Raggett, Matthias Kovatsch, Michael Koster and Michael McCool for their comments and guidance.
    </p>
  </section>

  </body>
</html>
