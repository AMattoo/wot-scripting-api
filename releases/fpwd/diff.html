<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        /* --- EXAMPLES --- */

        div.example-title {
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.example-title span {
            text-transform: uppercase;
        }

        aside.example,
        div.example,
        div.illegal-example {
            padding: 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: black
        }

        aside.example,
        div.example {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee;
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff;
        }

        aside.example div.example div.example-title {
            color: #999;
        }
    </style>
    <style>
        /* --- ISSUES/NOTES --- */

        div.issue-title,
        div.note-title,
        div.ednote-title,
        div.warning-title {
            padding-right: 1em;
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.issue-title {
            color: #e05252;
        }

        div.note-title,
        div.ednote-title {
            color: #2b2;
        }

        div.warning-title {
            color: #f22;
        }

        div.issue-title span,
        div.note-title span,
        div.ednote-title span,
        div.warning-title span {
            text-transform: uppercase;
        }

        div.note,
        div.issue,
        div.ednote,
        div.warning {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .note>p:first-child,
        .ednote>p:first-child,
        .issue>p:first-child,
        .warning>p:first-child {
            margin-top: 0
        }

        .issue,
        .note,
        .ednote,
        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
        }

        div.issue,
        div.note,
        div.ednote,
        div.warning {
            padding: 1em 1.2em 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        span.note,
        span.ednote,
        span.issue,
        span.warning {
            padding: .1em .5em .15em;
        }

        .issue {
            border-color: #e05252;
            background: #fbe9e9;
        }

        .note,
        .ednote {
            border-color: #52e052;
            background: #e9fbe9;
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
        }

        .warning-title:before {
            content: "âš ";
            /*U+26A0 WARNING SIGN*/
            font-size: 3em;
            float: left;
            height: 100%;
            padding-right: .3em;
            vertical-align: top;
            margin-top: -0.5em;
        }

        li.task-list-item {
            list-style: none;
        }

        input.task-list-item-checkbox {
            margin: 0 0.35em 0.25em -1.6em;
            vertical-align: middle;
        }
    </style>
    <style>
        /* --- WEB IDL --- */

        pre.idl {
            padding: 1em;
        }

        .respec-idl-separator {
            padding: 0 0 0.4cm 0;
        }

        .respec-idl-separator:last-child {
            padding: 0;
        }

        @media print {
            pre.idl {
                white-space: pre-wrap;
            }
        }

        pre.idl::before {
            content: "WebIDL";
            display: block;
            width: 150px;
            background: #90b8de;
            color: #fff;
            font-family: sans-serif;
            font-weight: bold;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px;
        }

        .idlType {
            color: #ff4500;
            font-weight: bold;
            text-decoration: none;
        }
        /*.idlModule*/
        /*.idlModuleID*/
        /*.idlInterface*/

        .idlInterfaceID,
        .idlDictionaryID,
        .idlCallbackID,
        .idlEnumID {
            font-weight: bold;
            color: #005a9c;
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c;
        }
        /*.idlAttribute*/

        .idlAttrType,
        .idlFieldType,
        .idlMemberType {
            color: #005a9c;
        }

        .idlAttrName,
        .idlFieldName,
        .idlMemberName {
            color: #ff4500;
        }

        .idlAttrName a,
        .idlFieldName a,
        .idlMemberName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none;
        }
        /*.idlMethod*/

        .idlMethType,
        .idlCallbackType {
            color: #005a9c;
        }

        .idlMethName {
            color: #ff4500;
        }

        .idlMethName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none;
        }
        /*.idlCtor*/

        .idlCtorName {
            color: #ff4500;
        }

        .idlCtorName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none;
        }
        /*.idlParam*/

        .idlParamType {
            color: #005a9c;
        }

        .idlParamName,
        .idlDefaultValue {
            font-style: italic;
        }

        .extAttr {
            color: #666;
        }
        /*.idlSectionComment*/

        .idlSectionComment {
            color: gray;
        }
        /*.idlIterable*/

        .idlIterableKeyType,
        .idlIterableValueType {
            color: #005a9c;
        }
        /*.idlMaplike*/

        .idlMaplikeKeyType,
        .idlMaplikeValueType {
            color: #005a9c;
        }
        /*.idlConst*/

        .idlConstType {
            color: #005a9c;
        }

        .idlConstName {
            color: #ff4500;
        }

        .idlConstName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none;
        }
        /*.idlException*/

        .idlExceptionID {
            font-weight: bold;
            color: #c00;
        }

        .idlTypedefID,
        .idlTypedefType {
            color: #005a9c;
        }

        .idlRaises,
        .idlRaises a.idlType,
        .idlRaises a.idlType code,
        .excName a,
        .excName a code {
            color: #c00;
            font-weight: normal;
        }

        .excName a {
            font-family: monospace;
        }

        .idlRaises a.idlType,
        .excName a.idlType {
            border-bottom: 1px dotted #c00;
        }

        .excGetSetTrue,
        .excGetSetFalse,
        .prmNullTrue,
        .prmNullFalse,
        .prmOptTrue,
        .prmOptFalse {
            width: 45px;
            text-align: center;
        }

        .excGetSetTrue,
        .prmNullTrue,
        .prmOptTrue {
            color: #0c0;
        }

        .excGetSetFalse,
        .prmNullFalse,
        .prmOptFalse {
            color: #c00;
        }

        .idlImplements a {
            font-weight: bold;
        }

        dl.attributes,
        dl.methods,
        dl.constants,
        dl.constructors,
        dl.fields,
        dl.dictionary-members {
            margin-left: 2em;
        }

        .attributes dt,
        .methods dt,
        .constants dt,
        .constructors dt,
        .fields dt,
        .dictionary-members dt {
            font-weight: normal;
        }

        .attributes dt code,
        .methods dt code,
        .constants dt code,
        .constructors dt code,
        .fields dt code,
        .dictionary-members dt code {
            font-weight: bold;
            color: #000;
            font-family: monospace;
        }

        .attributes dt code,
        .fields dt code,
        .dictionary-members dt code {
            background: #ffffd2;
        }

        .attributes dt .idlAttrType code,
        .fields dt .idlFieldType code,
        .dictionary-members dt .idlMemberType code {
            color: #005a9c;
            background: transparent;
            font-family: inherit;
            font-weight: normal;
            font-style: italic;
        }

        .methods dt code {
            background: #d9e6f8;
        }

        .constants dt code {
            background: #ddffd2;
        }

        .constructors dt code {
            background: #cfc;
        }

        .attributes dd,
        .methods dd,
        .constants dd,
        .constructors dd,
        .fields dd,
        .dictionary-members dd {
            margin-bottom: 1em;
        }

        table.parameters,
        table.exceptions {
            border-spacing: 0;
            border-collapse: collapse;
            margin: 0.5em 0;
            width: 100%;
        }

        table.parameters {
            border-bottom: 1px solid #90b8de;
        }

        table.exceptions {
            border-bottom: 1px solid #deb890;
        }

        .parameters th,
        .exceptions th {
            color: inherit;
            padding: 3px 5px;
            text-align: left;
            font-weight: normal;
        }

        .parameters th {
            color: #fff;
            background: #005a9c;
        }

        .exceptions th {
            background: #deb890;
        }

        .parameters td,
        .exceptions td {
            padding: 3px 10px;
            border-top: 1px solid #ddd;
            vertical-align: top;
        }

        .parameters tr:first-child td,
        .exceptions tr:first-child td {
            border-top: none;
        }

        .parameters td.prmName,
        .exceptions td.excName,
        .exceptions td.excCodeName {
            width: 100px;
        }

        .parameters td.prmType {
            width: 120px;
        }

        table.exceptions table {
            border-spacing: 0;
            border-collapse: collapse;
            width: 100%;
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: none;
            box-shadow: 0 0 5px rgba(81, 167, 232, 0.5);
        }

        .respec-button-copy-paste:focus:hover,
        .respec-button-copy-paste.selected:focus {
            border-color: #51a7e8;
        }

        .respec-button-copy-paste:hover,
        .respec-button-copy-paste:active,
        .respec-button-copy-paste.zeroclipboard-is-hover,
        .respec-button-copy-paste.zeroclipboard-is-active {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc;
        }

        .respec-button-copy-paste:active,
        .respec-button-copy-paste.selected,
        .respec-button-copy-paste.zeroclipboard-is-active {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf;
        }

        .respec-button-copy-paste:disabled,
        .respec-button-copy-paste:disabled:hover,
        .respec-button-copy-paste.disabled,
        .respec-button-copy-paste.disabled:hover {
            color: rgba(102, 102, 102, 0.5);
            cursor: default;
            background-color: rgba(229, 229, 229, 0.5);
            background-image: none;
            border-color: rgba(197, 197, 197, 0.5);
            box-shadow: none;
        }
    </style>

    <title>Web of Things (WoT) Scripting API</title>


    <style id="respec-mainstyle">
        /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
        /* Override code highlighter background */

        .hljs {
            background: transparent !important;
        }
        /* --- INLINES --- */

        em.rfc2119 {
            text-transform: lowercase;
            font-style: normal;
            color: #900;
        }

        h1 abbr,
        h2 abbr,
        h3 abbr,
        h4 abbr,
        h5 abbr,
        h6 abbr,
        a abbr {
            border: none;
        }

        dfn {
            font-weight: bold;
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none;
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        a.bibref {
            text-decoration: none;
        }

        cite .bibref {
            font-style: normal;
        }

        code {
            color: #c83500;
        }

        th code {
            color: inherit;
        }
        /* --- TOC --- */

        .toc a,
        .tof a {
            text-decoration: none;
        }

        a .secno,
        a .figno {
            color: #000;
        }

        ul.tof,
        ol.tof {
            list-style: none outside none;
        }

        .caption {
            margin-top: 0.5em;
            font-style: italic;
        }
        /* --- TABLE --- */

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c;
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left;
        }

        .simple th[scope="row"] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd;
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd;
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff;
        }
        /* --- DL --- */

        .section dd>p:first-child {
            margin-top: 0;
        }

        .section dd>p:last-child {
            margin-bottom: 0;
        }

        .section dd {
            margin-bottom: 1em;
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0;
        }

        #issue-summary>ul,
        .respec-dfn-list {
            column-count: 2;
        }

        #issue-summary li,
        .respec-dfn-list li {
            list-style: none;
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top;
        }

        details.respec-tests-details>* {
            padding-right: 2em;
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: white;
            padding-bottom: .5em;
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em;
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -0.3em;
        }

        details.respec-tests-details>li {
            padding-left: 1em;
        }

        @media print {
            .removeOnSave {
                display: none;
            }
        }
    </style>
    <style>
        /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

        .hljs {
            display: block;
            overflow-x: auto;
            padding: 0.5em;
            color: #333;
            background: #f8f8f8;
        }

        .hljs-comment,
        .hljs-quote {
            color: #998;
            font-style: italic;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-subst {
            color: #333;
            font-weight: bold;
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-template-variable,
        .hljs-tag .hljs-attr {
            color: #008080;
        }

        .hljs-string,
        .hljs-doctag {
            color: #d14;
        }

        .hljs-title,
        .hljs-section,
        .hljs-selector-id {
            color: #900;
            font-weight: bold;
        }

        .hljs-subst {
            font-weight: normal;
        }

        .hljs-type,
        .hljs-class .hljs-title {
            color: #458;
            font-weight: bold;
        }

        .hljs-tag,
        .hljs-name,
        .hljs-attribute {
            color: #000080;
            font-weight: normal;
        }

        .hljs-regexp,
        .hljs-link {
            color: #009926;
        }

        .hljs-symbol,
        .hljs-bullet {
            color: #990073;
        }

        .hljs-built_in,
        .hljs-builtin-name {
            color: #0086b3;
        }

        .hljs-meta {
            color: #999;
            font-weight: bold;
        }

        .hljs-deletion {
            background: #fdd;
        }

        .hljs-addition {
            background: #dfd;
        }

        .hljs-emphasis {
            font-style: italic;
        }

        .hljs-strong {
            font-weight: bold;
        }
    </style>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD">
    <link rel="canonical" href="https://www.w3.org/TR/wot-scripting-api/">
    <script id="initialUserConfig" type="application/json">
        {
            "specStatus": "WD",
            "shortName": "wot-scripting-api",
            "copyrightStart": 2017,
            "noLegacyStyle": true,
            "publishDate": "",
            "previousPublishDate": "",
            "previousMaturity": "",
            "edDraftURI": "https://w3c.github.io/wot-scripting-api/",
            "crEnd": "",
            "inlineCSS": true,
            "noIDLIn": true,
            "format": "markdown",
            "editors": [{
                    "name": "Zoltan Kis",
                    "company": "Intel",
                    "companyURL": "https://www.intel.com/"
                },
                {
                    "name": "Kazuaki Nimura",
                    "company": "Fujitsu Ltd.",
                    "companyURL": "https://www.fujitsu.com/"
                },
                {
                    "name": "Daniel Peintner",
                    "company": "Siemens AG",
                    "companyURL": "https://www.siemens.com/"
                }
            ],
            "wg": "Web of Things Working Group",
            "wgURI": "https://www.w3.org/WoT/WG/",
            "wgPublicList": "public-wot-wg",
            "issueBase": "https://www.github.com/w3c/wot-scripting-api/issues/",
            "githubAPI": "https://api.github.com/repos/w3c/wot-scripting-api",
            "otherLinks": [{
                    "key": "Contributors",
                    "data": [{
                        "value": "In the GitHub repository",
                        "href": "https://github.com/w3c/wot-scripting-api/graphs/contributors"
                    }]
                },
                {
                    "key": "Repository",
                    "data": [{
                            "value": "We are on GitHub",
                            "href": "https://github.com/w3c/wot-scripting-api"
                        },
                        {
                            "value": "File a bug",
                            "href": "https://github.com/w3c/wot-scripting-api/issues"
                        }
                    ]
                }
            ],
            "localBiblio": {
                "WOT-ARCHITECTURE": {
                    "href": "https://w3c.github.io/wot-architecture/",
                    "title": "Web of Things Architecture",
                    "publisher": "W3C",
                    "date": "20 August 2017"
                },
                "WOT-TD": {
                    "href": "https://w3c.github.io/wot-thing-description/",
                    "title": "WoT Thing Description ",
                    "publisher": "W3C",
                    "date": "20 August 2017"
                },
                "WOT-PROTOCOL-BINDINGS": {
                    "href": "https://w3c.github.io/wot-binding-templates/",
                    "title": "Web of Things Protocol Binding Templates",
                    "publisher": "W3C",
                    "date": "20 August 2017"
                },
                "WOT-PRACTICES": {
                    "href": "http://w3c.github.io/wot/current-practices/wot-practices.html",
                    "title": "Web of Things Current Practices",
                    "publisher": "W3C",
                    "date": "6 February 2017"
                },
                "TYPESCRIPT": {
                    "href": "https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md",
                    "title": "TypeScript Language Specification",
                    "publisher": "Microsoft",
                    "date": "1 October 2012"
                },
                "WEBAPPSEC": {
                    "href": "https://w3c.github.io/webappsec/specs/powerfulfeatures",
                    "title": "Secure Contexts",
                    "publisher": "W3C",
                    "date": "17 July 2015"
                }
            },
            "publishISODate": "2017-09-14T00:00:00.000Z",
            "generatedSubtitle": "First Public Working Draft 14 September 2017"
        }
    </script>
    <meta name="generator" content="ReSpec 16.2.2">
    <meta name="description" content="The Web of Things (WoT) provides layered interoperability between Things by using the WoT Interfaces.">
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>

<body class="h-entry toc-inline" id="respecDocument" aria-busy="false">
<div class="head" role="contentinfo" id="respecHeader">
<p>
<a class="logo" href="https://www.w3.org/">
<img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" width="72" height="48">
</a>
</p>
<p>
</p>
<h1 class="title p-name" id="title">
Web
of
Things
(WoT)
Scripting
API
</h1>
<h2 id="w3c-first-public-working-draft-14-september-2017">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<del class="diff-old">Editor's
</del>
<ins class="diff-chg">First
Public
Working
</ins>
Draft
<del class="diff-old">13
</del>
<time class="dt-published" datetime="2017-09-14">
<ins class="diff-chg">14
</ins>
September
2017
</time>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">https://w3c.github.io/wot-scripting-api/
</del>
<a class="u-url" href="https://www.w3.org/TR/2017/WD-wot-scripting-api-20170914/">
<ins class="diff-chg">https://www.w3.org/TR/2017/WD-wot-scripting-api-20170914/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href="https://www.w3.org/TR/wot-scripting-api/">
https://www.w3.org/TR/wot-scripting-api/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href="https://w3c.github.io/wot-scripting-api/">
https://w3c.github.io/wot-scripting-api/
</a>
</dd>
<dt>
Editors:
</dt>
<dd class="p-author h-card vcard">
<span class="p-name fn">
Zoltan
Kis
</span>,
<a class="p-org org h-org h-card" href="https://www.intel.com/">
Intel
</a>
</dd>
<dd class="p-author h-card vcard">
<span class="p-name fn">
Kazuaki
Nimura
</span>,
<a class="p-org org h-org h-card" href="https://www.fujitsu.com/">
Fujitsu
Ltd.
</a>
</dd>
<dd class="p-author h-card vcard">
<span class="p-name fn">
Daniel
Peintner
</span>,
<a class="p-org org h-org h-card" href="https://www.siemens.com/">
Siemens
AG
</a>
</dd>
<dt>
Contributors:
</dt>
<dd>
<a href="https://github.com/w3c/wot-scripting-api/graphs/contributors">
In
the
GitHub
repository
</a>
</dd>
<dt>
Repository:
</dt>
<dd>
<a href="https://github.com/w3c/wot-scripting-api">
We
are
on
GitHub
</a>
</dd>
<dd>
<a href="https://github.com/w3c/wot-scripting-api/issues">
File
a
bug
</a>
</dd>
</dl>
<p class="copyright">
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
Â©
2017
<a href="https://www.w3.org/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
Â®
</sup>
(
<a href="https://www.csail.mit.edu/">
<abbr title="Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href="https://www.ercim.eu/">
<abbr title="European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="https://www.keio.ac.jp/">
Keio
</a>,
<a href="http://ev.buaa.edu.cn/">
Beihang
</a>
).
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">
permissive
document
license
</a>
rules
apply.
</p>
<hr title="Separator for header">
</div>
<section id="abstract" class="introductory">
<h2 id="abstract-0">
Abstract
</h2>
<p>
The
<a href="#dfn-web-of-things" class="internalDFN" data-link-type="dfn">
Web
of
Things
</a>
(WoT)
provides
layered
interoperability
between
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Things
</a>
by
using
the
<a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn">
WoT
Interface
</a>
s.
</p>
<p>
This
specification
describes
a
programming
interface
representing
the
<a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn">
WoT
Interface
</a>
that
allows
scripts
run
on
a
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
to
discover
and
consume
(retrieve)
other
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
and
to
expose
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Things
</a>
characterized
by
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
</p>
<p>
Scripting
is
an
optional
"convenience"
building
block
in
WoT
and
it
is
typically
used
in
gateways
that
are
able
to
run
a
<a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn">
WoT
Runtime
</a>
and
<a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/script-manager">
script
management
</a>,
providing
a
convenient
way
to
extend
WoT
support
to
new
types
of
endpoints
and
implement
WoT
applications
like
<a href="https://github.com/w3c/wot-scripting-api/tree/master/applications/thing-directory">
Thing
Directory
</a>.
</p>
</section>
<section id="sotd" class="introductory">
<h2 id="status-of-this-document">
Status
of
This
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
<abbr title="World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href="https://www.w3.org/TR/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
https://www.w3.org/TR/.
</em>
</p>
<p>
Implementers
need
to
be
aware
that
this
specification
is
considered
unstable.
Vendors
interested
in
implementing
this
specification
before
it
eventually
reaches
the
Candidate
Recommendation
phase
should
subscribe
to
the
<a href="https://github.com/w3c/wot-scripting-api">
repository
</a>
and
take
part
in
the
discussions.
</p>
<div class="ednote">
<div class="ednote-title marker" aria-level="3" role="heading" id="h-ednote1">
<span>
Editor's
note
</span>
<span style="text-transform: none">:
The
W3C
WoT
WG
is
asking
for
feedback
</span>
</div>
<p class="">
Please
contribute
to
this
draft
using
the
<a href="https://github.com/w3c/wot-scripting-api/issues">
GitHub
Issue
</a>
feature
of
the
<a href="https://github.com/w3c/wot-scripting-api/">
WoT
Scripting
API
</a>
repository.
For
feedback
on
security
and
privacy
considerations,
please
use
the
<a href="https://github.com/w3c/wot-security/issues">
WoT
Security
and
Privacy
</a>
Issues.
</p>
</div>
<p>
This
document
was
published
by
the
<a href="https://www.w3.org/WoT/WG/">
Web
of
Things
Working
Group
</a>
as
<del class="diff-old">an
Editor's
</del>
<ins class="diff-chg">a
First
Public
Working
</ins>
Draft.
<ins class="diff-new">This
document
is
intended
to
become
a
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Recommendation.
</ins></p><p>
Comments
regarding
this
document
are
welcome.
Please
send
them
to
<a href="mailto:public-wot-wg@w3.org">
public-wot-wg@w3.org
</a>
(
<a href="mailto:public-wot-wg-request@w3.org?subject=subscribe">
subscribe
</a>,
<a href="https://lists.w3.org/Archives/Public/public-wot-wg/">
archives
</a>
).
</p>
<p>
Publication
as
<del class="diff-old">an
Editor's
</del>
<ins class="diff-chg">a
First
Public
Working
</ins>
Draft
does
not
imply
endorsement
by
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p>
This
document
was
produced
by
a
group
operating
under
the
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">
5
February
2004
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
<abbr title="World Wide Web Consortium">
W3C
</abbr>
maintains
a
<a href="https://www.w3.org/2004/01/pp-impl/95969/status" rel="disclosure">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
section
6
of
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="https://www.w3.org/2017/Process-20170301/">
1
March
2017
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<nav id="toc">
<h2 class="introductory" id="table-of-contents">
Table
of
Contents
</h2>
<ol class="toc" role="directory">
<li class="tocline">
<a href="#introduction" class="tocxref">
<span class="secno">
1.
</span>
Introduction
</a>
</li>
<li class="tocline">
<a href="#use-cases" class="tocxref">
<span class="secno">
2.
</span>
Use
Cases
</a>
</li>
<li class="tocline">
<a href="#the-wot-object" class="tocxref">
<span class="secno">
3.
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="WoT">
<code>
WoT
</code>
</span>
object
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-discover()-method" class="tocxref">
<span class="secno">
3.1
</span>
The
<span data-dfn-for="wot" data-dfn-type="dfn" data-idl="" data-title="discover()" data-lt="discover()|discover">
<code>
discover()
</code>
</span>
method
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingfilter-dictionary" class="tocxref">
<span class="secno">
3.1.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingFilter">
<code>
ThingFilter
</code>
</span>
dictionary
</a>
</li>
<li class="tocline">
<a href="#the-discoverymethod-enumeration" class="tocxref">
<span class="secno">
3.1.2
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="DiscoveryMethod">
<code>
DiscoveryMethod
</code>
</span>
enumeration
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-consume()-method" class="tocxref">
<span class="secno">
3.2
</span>
The
<span data-dfn-for="wot" data-dfn-type="dfn" data-idl="" data-title="consume()" data-lt="consume()|consume">
<code>
consume()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-expose()-method" class="tocxref">
<span class="secno">
3.3
</span>
The
<span data-dfn-for="wot" data-dfn-type="dfn" data-idl="" data-title="expose()" data-lt="expose()|expose">
<code>
expose()
</code>
</span>
method
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thinginit-dictionary" class="tocxref">
<span class="secno">
3.3.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingInit">
<code>
ThingInit
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#examples" class="tocxref">
<span class="secno">
3.4
</span>
Examples
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-consumedthing-interface" class="tocxref">
<span class="secno">
4.
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ConsumedThing">
<code>
ConsumedThing
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-invokeaction()-method" class="tocxref">
<span class="secno">
4.1
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="invokeAction()" data-lt="invokeaction()|invokeAction">
<code>
invokeAction()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-setproperty()-method" class="tocxref">
<span class="secno">
4.2
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="setProperty()" data-lt="setproperty()|setProperty">
<code>
setProperty()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-getproperty()-method" class="tocxref">
<span class="secno">
4.3
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="getProperty()" data-lt="getproperty()|getProperty">
<code>
getProperty()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-addlistener()-method" class="tocxref">
<span class="secno">
4.4
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="addListener()" data-lt="addlistener()|addListener">
<code>
addListener()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-removelistener()-method" class="tocxref">
<span class="secno">
4.5
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="removeListener()" data-lt="removelistener()|removeListener">
<code>
removeListener()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-removealllisteners()-method" class="tocxref">
<span class="secno">
4.6
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="removeAllListeners()" data-lt="removealllisteners()|removeAllListeners">
<code>
removeAllListeners()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-observe()-method" class="tocxref">
<span class="secno">
4.7
</span>
The
<span data-dfn-for="consumedthing" data-dfn-type="dfn" data-idl="" data-title="observe()" data-lt="observe()|observe">
<code>
observe()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-thingeventlistener-callback" class="tocxref">
<span class="secno">
4.8
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingEventListener">
<code>
ThingEventListener
</code>
</span>
callback
</a>
</li>
<li class="tocline">
<a href="#events" class="tocxref">
<span class="secno">
4.9
</span>
Events
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-propertychangeevent-interface" class="tocxref">
<span class="secno">
4.9.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="PropertyChangeEvent">
<code>
PropertyChangeEvent
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-propertychangeeventinit-dictionary" class="tocxref">
<span class="secno">
4.9.1.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="PropertyChangeEventInit">
<code>
PropertyChangeEventInit
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-actioninvocationevent-interface" class="tocxref">
<span class="secno">
4.9.2
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ActionInvocationEvent">
<code>
ActionInvocationEvent
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-actioninvocationeventinit-dictionary" class="tocxref">
<span class="secno">
4.9.2.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ActionInvocationEventInit">
<code>
ActionInvocationEventInit
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-thingdescriptionchangeevent-interface" class="tocxref">
<span class="secno">
4.9.3
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingDescriptionChangeEvent">
<code>
ThingDescriptionChangeEvent
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingdescriptionchangeeventinit-dictionary" class="tocxref">
<span class="secno">
4.9.3.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingDescriptionChangeEventInit">
<code>
ThingDescriptionChangeEventInit
</code>
</span>
dictionary
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-tdchangemethod-enumeration" class="tocxref">
<span class="secno">
4.9.3.1.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="TDChangeMethod">
<code>
TDChangeMethod
</code>
</span>
enumeration
</a>
</li>
<li class="tocline">
<a href="#the-tdchangetype-enumeration" class="tocxref">
<span class="secno">
4.9.3.1.2
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="TDChangeType">
<code>
TDChangeType
</code>
</span>
enumeration
</a>
</li>
<li class="tocline">
<a href="#the-tdchangedata-type" class="tocxref">
<span class="secno">
4.9.3.1.3
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="TDChangeData">
<code>
TDChangeData
</code>
</span>
type
</a>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="tocline">
<a href="#examples-0" class="tocxref">
<span class="secno">
4.10
</span>
Examples
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-exposedthing-interface" class="tocxref">
<span class="secno">
5.
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ExposedThing">
<code>
ExposedThing
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingdescription-type" class="tocxref">
<span class="secno">
5.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingDescription">
<code>
ThingDescription
</code>
</span>
type
</a>
</li>
<li class="tocline">
<a href="#the-request-interface" class="tocxref">
<span class="secno">
5.2
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="Request">
<code>
Request
</code>
</span>
interface
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-requesttype-enumeration" class="tocxref">
<span class="secno">
5.2.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="RequestType">
<code>
RequestType
</code>
</span>
enumeration
</a>
</li>
<li class="tocline">
<a href="#the-respond()-method" class="tocxref">
<span class="secno">
5.2.2
</span>
The
<span data-dfn-for="request" data-dfn-type="dfn" data-idl="" data-title="respond()" data-lt="respond()|respond">
<code>
respond()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-respondwitherror()-method" class="tocxref">
<span class="secno">
5.2.3
</span>
The
<span data-dfn-for="request" data-dfn-type="dfn" data-idl="" data-title="respondWithError()" data-lt="respondwitherror()|respondWithError">
<code>
respondWithError()
</code>
</span>
method
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-requesthandler-callback" class="tocxref">
<span class="secno">
5.3
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="RequestHandler">
<code>
RequestHandler
</code>
</span>
callback
</a>
</li>
<li class="tocline">
<a href="#the-addproperty()-method" class="tocxref">
<span class="secno">
5.4
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="addProperty()" data-lt="addproperty()|addProperty">
<code>
addProperty()
</code>
</span>
method
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingpropertyinit-dictionary" class="tocxref">
<span class="secno">
5.4.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingPropertyInit">
<code>
ThingPropertyInit
</code>
</span>
dictionary
</a>
</li>
<li class="tocline">
<a href="#the-semantictype-dictionary" class="tocxref">
<span class="secno">
5.4.2
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="SemanticType">
<code>
SemanticType
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-removeproperty()-method" class="tocxref">
<span class="secno">
5.5
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="removeProperty()" data-lt="removeproperty()|removeProperty">
<code>
removeProperty()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-addaction()-method" class="tocxref">
<span class="secno">
5.6
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="addAction()" data-lt="addaction()|addAction">
<code>
addAction()
</code>
</span>
method
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingactioninit-dictionary" class="tocxref">
<span class="secno">
5.6.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingActionInit">
<code>
ThingActionInit
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-removeaction()-method" class="tocxref">
<span class="secno">
5.7
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="removeAction()" data-lt="removeaction()|removeAction">
<code>
removeAction()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-addevent()-method" class="tocxref">
<span class="secno">
5.8
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="addEvent()" data-lt="addevent()|addEvent">
<code>
addEvent()
</code>
</span>
method
</a>
<ol class="toc">
<li class="tocline">
<a href="#the-thingeventinit-dictionary" class="tocxref">
<span class="secno">
5.8.1
</span>
The
<span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ThingEventInit">
<code>
ThingEventInit
</code>
</span>
dictionary
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#the-removeevent()-method" class="tocxref">
<span class="secno">
5.9
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="removeEvent()" data-lt="removeevent()|removeEvent">
<code>
removeEvent()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-onretrieveproperty()-method" class="tocxref">
<span class="secno">
5.10
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="onRetrieveProperty()" data-lt="onretrieveproperty()|onRetrieveProperty">
<code>
onRetrieveProperty()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-onupdateproperty()-method" class="tocxref">
<span class="secno">
5.11
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="onUpdateProperty()" data-lt="onupdateproperty()|onUpdateProperty">
<code>
onUpdateProperty()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-oninvokeaction()-method" class="tocxref">
<span class="secno">
5.12
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="onInvokeAction()" data-lt="oninvokeaction()|onInvokeAction">
<code>
onInvokeAction()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-onobserve()-method" class="tocxref">
<span class="secno">
5.13
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="onObserve()" data-lt="onobserve()|onObserve">
<code>
onObserve()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-register()-method" class="tocxref">
<span class="secno">
5.14
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="register()" data-lt="register()|register">
<code>
register()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-unregister()-method" class="tocxref">
<span class="secno">
5.15
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="unregister()" data-lt="unregister()|unregister">
<code>
unregister()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-start()-method" class="tocxref">
<span class="secno">
5.16
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="start()" data-lt="start()|start">
<code>
start()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-stop()-method" class="tocxref">
<span class="secno">
5.17
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="stop()" data-lt="stop()|stop">
<code>
stop()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#the-emitevent()-method" class="tocxref">
<span class="secno">
5.18
</span>
The
<span data-dfn-for="exposedthing" data-dfn-type="dfn" data-idl="" data-title="emitEvent()" data-lt="emitevent()|emitEvent">
<code>
emitEvent()
</code>
</span>
method
</a>
</li>
<li class="tocline">
<a href="#events-supported-by-exposedthing" class="tocxref">
<span class="secno">
5.19
</span>
Events
supported
by
ExposedThing
</a>
</li>
<li class="tocline">
<a href="#examples-1" class="tocxref">
<span class="secno">
5.20
</span>
Examples
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#security" class="tocxref">
<span class="secno">
6.
</span>
Security
and
Privacy
</a>
</li>
<li class="tocline">
<a href="#terminology-and-conventions" class="tocxref">
<span class="secno">
7.
</span>
Terminology
and
conventions
</a>
</li>
<li class="tocline">
<a href="#conformance" class="tocxref">
<span class="secno">
8.
</span>
Conformance
</a>
</li>
<li class="tocline">
<a href="#Changes" class="tocxref">
<span class="secno">
A.
</span>
Changes
</a>
</li>
<li class="tocline">
<a href="#openissues" class="tocxref">
<span class="secno">
B.
</span>
Open
issues
</a>
</li>
<li class="tocline">
<a href="#acknowledgements" class="tocxref">
<span class="secno">
C.
</span>
Acknowledgements
</a>
</li>
<li class="tocline">
<a href="#references" class="tocxref">
<span class="secno">
D.
</span>
References
</a>
<ol class="toc">
<li class="tocline">
<a href="#normative-references" class="tocxref">
<span class="secno">
D.1
</span>
Normative
references
</a>
</li>
</ol>
</li>
</ol>
</nav>
<section id="introduction">
<h2 id="x1.-introduction">
<span class="secno">
1.
</span>
Introduction
</h2>
<p>
The
overall
WoT
concepts
are
described
in
the
<a href="https://w3c.github.io/wot-architecture/">
WoT
Architecture
</a>
document.
The
Web
of
Things
is
made
of
entities
(
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s)
that
can
describe
their
capabilities
in
a
machine-interpretable
format,
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
(TD)
and
expose
these
capabilities
through
the
<a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn">
WoT
Interface
</a>.
Support
for
scripting
is
optional
for
WoT
devices.
</p>
<p>
By
<a href="#dfn-consuming-a-thing-description" class="internalDFN" data-link-type="dfn">
consuming
a
TD
</a>,
a
client
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
creates
a
runtime
resource
model
that
allows
accessing
the
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
exposed
by
the
server
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
<p>
Exposing
a
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
requires
defining
a
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
and
instantiating
a
software
stack
needed
to
serve
requests
for
accessing
the
exposed
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
This
specification
describes
how
to
expose
and
consume
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
by
a
script.
</p>
<div class="note">
<div class="note-title marker" aria-level="3" role="heading" id="h-note1">
<span>
Note
</span>
</div>
<p class="">
Typically
scripts
are
meant
to
be
used
on
devices
able
to
provide
resources
(with
a
<a href="#dfn-wot-interface" class="internalDFN" data-link-type="dfn">
WoT
interface
</a>
)
for
managing
(installing,
updating,
running)
scripts,
such
as
bridges
or
gateways
that
expose
and
control
simpler
devices
as
WoT
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s.
</p>
</div>
<p>
For
an
introduction
on
how
scripts
could
be
used
in
<a href="#dfn-web-of-things" class="internalDFN" data-link-type="dfn">
Web
of
Things
</a>,
check
the
<a href="https://w3c.github.io/wot-scripting-api/primer">
Primer
</a>
document.
For
some
background
on
API
design
decisions
check
the
<a href="https://w3c.github.io/wot-scripting-api/rationale">
Rationale
</a>
document.
</p>
</section>
<section class="informative" id="use-cases">
<h2 id="x2.-use-cases">
<span class="secno">
2.
</span>
Use
Cases
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
The
following
scripting
use
cases
are
covered
in
this
specification:
</p>
<ul>
<li>
Discover
all
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
in
the
WoT
network
by
sending
a
broadcast
request.
</li>
<li>
Discover
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
running
in
the
local
<a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn">
WoT
Runtime
</a>.
</li>
<li>
Discover
nearby
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s,
for
instance
by
NFC
or
Bluetooth.
</li>
<li>
Discover
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
by
sending
a
discovery
request
to
a
given
registry.
</li>
<li>
Discover
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
by
filters
defined
on
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
s
</li>
<li>
Discover
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
by
semantic
filters.
</li>
<li>
Stop
or
suppress
an
ongoing
discovery
process.
</li>
<li>
Fetch
and
<a href="#dfn-consuming-a-thing-description" class="internalDFN" data-link-type="dfn">
consume
a
TD
</a>
of
a
remote
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
On
a
consumed
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>,
<ul>
<li>
Get
the
value
of
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
or
set
of
properties.
</li>
<li>
Set
the
value
of
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
or
a
set
of
properties.
</li>
<li>
Invoke
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
</li>
<li>
Observe
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
<ul>
<li>
Add
a
listener
to
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>.
</li>
<li>
Remove
a
listener
from
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>.
</li>
<li>
Remove
all
listeners.
</li>
</ul>
Default
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
are
the
following:
<ul>
<li>
A
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
has
changed.
</li>
<li>
An
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
has
been
invoked.
</li>
<li>
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
has
changed,
i.e.
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Properties
</a>,
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
or
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
have
been
defined,
removed,
or
the
definition
has
changed.
</li>
</ul>
</li>
</ul>
</li>
<li>
Consume
a
thing.
</li>
<li>
Create
and
expose
a
local
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
based
on
a
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</li>
<li>
Programmatically
create
and
expose
a
local
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
This
may
include
the
following
use
cases:
<ul>
<li>
Create
a
local
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
Add
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
definition
to
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
Add
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
definition
to
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
Add
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
definition
to
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
Attach
semantic
information
to
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
</li>
<li>
Attach
semantic
information
to
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
</li>
<li>
Attach
semantic
information
to
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
</li>
<li>
Emit
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>,
i.e.
notify
all
listeners
subscribed
to
that
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>.
</li>
<li>
Register
handlers
for
external
requests:
<ul>
<li>
to
retrieve
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
value;
</li>
<li>
to
update
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
value;
</li>
<li>
to
run
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>:
take
the
parameters
from
the
request,
execute
the
defined
action,
and
return
the
result;
</li>
<li>
to
add
a
listener
to
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
;
</li>
<li>
to
remove
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
listener.
</li>
<li>
to
fetch
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
;
</li>
</ul>
</li>
</ul>
</li>
<li>
Register
the
Thing.
</li>
<li>
Unregister
the
Thing.
</li>
<li>
Start
the
exposed
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
in
order
to
process
external
requests.
</li>
<li>
Stop
the
exposed
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
</ul>
<p>
The
following
use
cases
are
being
considered
for
next
versions:
</p>
<ul>
<li>
Add,
remove
and
update
the
definition
of
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
on
a
Thing
that
runs
in
the
same
the
WoT
Runtime.
</li>
<li>
Add,
remove
and
update
the
definition
of
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
on
a
Thing
that
runs
in
the
same
the
WoT
Runtime.
</li>
<li>
Add,
remove
and
update
the
definition
of
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
on
a
Thing
that
runs
in
the
same
the
WoT
Runtime.
</li>
</ul>
</section>
<section data-dfn-for="WoT" id="the-wot-object">
<h2 id="x3.-the-wot-object">
<span class="secno">
3.
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-wot" data-idl="" data-title="WoT">
<code>
WoT
</code>
</dfn>
object
</h2>
<p>
The
WoT
object
is
the
main
API
entry
point
and
it
is
exposed
by
an
implementation
of
the
<a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn">
WoT
Runtime
</a>.
The
<dfn data-dfn-type="dfn" id="dfn-wot-object">
WoT
object
</dfn>
has
no
internal
state
and
provides
methods
for
discovering,
consuming
and
exposing
a
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
<div class="note">
<div class="note-title marker" aria-level="3" role="heading" id="h-note2">
<span>
Note
</span>
</div>
<p class="">
Browser
implementations
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
use
a
namespace
object
such
as
<code>
wot
</code>,
and
<a href="https://nodejs.org/en/">
Node.js
</a>
-like
runtimes
<em class="rfc2119" title="MAY">
MAY
</em>
provide
the
API
object
through
the
<a href="https://nodejs.org/api/modules.html">
<code>
require()
</code>
</a>
or
<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-imports">
<code>
import
</code>
</a>
mechanism.
</p>
</div>
<div>
            <pre class="def idl"><span class="idlInterface" id="idl-def-wot" data-idl="" data-title="WoT">interface <span class="idlInterfaceID"><a data-lt="WoT" href="#dom-wot" class="internalDFN" data-link-type="dfn" data-for=""><code>WoT</code></a></span> {
<span class="idlMethod" id="idl-def-wot-discover(filter)" data-idl="" data-title="discover" data-dfn-for="wot">    <span class="idlMethType"><a href="#dfn-observable" class="internalDFN" data-link-type="dfn">Observable</a>&lt;<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn"><code>ConsumedThing</code></a>&gt;</span> <span class="idlMethName"><a data-lt="discover()|discover()|discover" data-lt-nodefault="" href="#dom-wot-discover()" class="internalDFN" data-link-type="dfn" data-for="WoT">discover</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-thingfilter" class="internalDFN" data-link-type="dfn"><code>ThingFilter</code></a></span> <span class="idlParamName">filter</span></span>);</span>
<span class="idlMethod" id="idl-def-wot-consume(url)" data-idl="" data-title="consume" data-dfn-for="wot">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn"><code>ConsumedThing</code></a>&gt;</span>    <span class="idlMethName"><a data-lt="consume()|consume()|consume" data-lt-nodefault="" href="#dom-wot-consume()" class="internalDFN" data-link-type="dfn" data-for="WoT">consume</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span></span>);</span>
<span class="idlMethod" id="idl-def-wot-expose(init)" data-idl="" data-title="expose" data-dfn-for="wot">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a>&gt;</span>     <span class="idlMethName"><a data-lt="expose()|expose()|expose" data-lt-nodefault="" href="#dom-wot-expose()" class="internalDFN" data-link-type="dfn" data-for="WoT">expose</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-thinginit" class="internalDFN" data-link-type="dfn"><code>ThingInit</code></a></span> <span class="idlParamName">init</span></span>);</span>
};
</span>
</pre>
</div>
<div class="ednote">
<div class="ednote-title marker" aria-level="3" role="heading" id="h-ednote2">
<span>
Editor's
note
</span>
</div>
<p class="">
The
algorithms
for
the
WoT
methods
will
be
specified
later.
</p>
</div>
<section id="the-discover()-method">
<h3 id="x3.1-the-discover()-method">
<span class="secno">
3.1
</span>
The
<dfn data-dfn-for="wot" data-dfn-type="dfn" id="dom-wot-discover()" data-idl="" data-title="discover()" data-lt="discover()|discover">
<code>
discover()
</code>
</dfn>
method
</h3>
<p>
Starts
the
discovery
process
that
will
provide
<code>
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>
</code>
objects
that
match
the
optional
argument
<code>
<a href="#dom-thingfilter" class="internalDFN" data-link-type="dfn">
<code>
ThingFilter
</code>
</a>
</code>.
When
the
argument
is
not
provided,
starts
the
widest
discovery
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
and
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
allow.
Returns
an
<a href="https://github.com/tc39/proposal-observable">
<code>
Observable
</code>
</a>
object
that
can
be
subscribed
and
unsubscribed
to.
</p>
<section data-dfn-for="ThingFilter" id="the-thingfilter-dictionary">
<h4 id="x3.1.1-the-thingfilter-dictionary">
<span class="secno">
3.1.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingfilter" data-idl="" data-title="ThingFilter">
<code>
ThingFilter
</code>
</dfn>
dictionary
</h4>
<p>
The
<a href="#dom-thingfilter" class="internalDFN" data-link-type="dfn">
<code>
ThingFilter
</code>
</a>
dictionary
that
represents
the
constraints
for
discovering
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
as
key-value
pairs.
</p>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-thingfilter" data-idl="" data-title="ThingFilter">dictionary <span class="idlDictionaryID"><a data-lt="ThingFilter" href="#dom-thingfilter" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingFilter</code></a></span> {
<span class="idlMember" id="idl-def-thingfilter-method" data-idl="" data-title="method" data-dfn-for="thingfilter">    <span class="idlMemberType">(DiscoveryType or <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>)</span> <span class="idlMemberName"><a data-lt="method" href="#dom-thingfilter-method" class="internalDFN" data-link-type="dfn" data-for="ThingFilter"><code>method</code></a></span> = <span class="idlMemberValue">"any"</span>;</span>
<span class="idlMember" id="idl-def-thingfilter-url" data-idl="" data-title="url" data-dfn-for="thingfilter">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>                    <span class="idlMemberName"><a data-lt="url" href="#dom-thingfilter-url" class="internalDFN" data-link-type="dfn" data-for="ThingFilter"><code>url</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingfilter-description" data-idl="" data-title="description" data-dfn-for="thingfilter">    <span class="idlMemberType">Dictionary</span>                   <span class="idlMemberName"><a data-lt="description" href="#dom-thingfilter-description" class="internalDFN" data-link-type="dfn" data-for="ThingFilter"><code>description</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<dfn data-dfn-for="thingfilter" data-dfn-type="dfn" id="dom-thingfilter-method" data-idl="" data-title="method">
<code>
method
</code>
</dfn>
property
represents
the
discovery
type
that
should
be
used
in
the
discovery
process.
The
possible
values
are
defined
by
the
<code>
<a href="#dom-discoverymethod" class="internalDFN" data-link-type="dfn">
<code>
DiscoveryMethod
</code>
</a>
</code>
enumeration
that
can
be
extended
by
string
values
defined
by
solutions
(with
no
guarantee
of
interoperability).
</p>
<p>
The
<dfn data-dfn-for="thingfilter" data-dfn-type="dfn" id="dom-thingfilter-url" data-idl="" data-title="url">
<code>
url
</code>
</dfn>
property
represents
additional
information
for
the
discovery
method,
such
as
the
URL
of
the
<a href="#dfn-thing-directory" class="internalDFN" data-link-type="dfn">
Thing
Directory
</a>
server
to
be
used.
</p>
<p>
The
<dfn data-dfn-for="thingfilter" data-dfn-type="dfn" id="dom-thingfilter-description" data-idl="" data-title="description">
<code>
description
</code>
</dfn>
property
represents
additional
information
for
the
discovery
method
in
the
form
of
a
set
of
key-value
pairs,
as
defined
in
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
<div class="ednote">
<div class="ednote-title marker" aria-level="5" role="heading" id="h-ednote3">
<span>
Editor's
note
</span>
</div>
<p class="">
The
<a href="#dom-discoverymethod" class="internalDFN" data-link-type="dfn">
<code>
DiscoveryMethod
</code>
</a>
enumeration
can
be
extended
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
with
values
that
are
not
specified
here.
This
extensibility
of
<a href="#dom-discoverymethod" class="internalDFN" data-link-type="dfn">
<code>
DiscoveryMethod
</code>
</a>
by
proprietary
or
private
methods
is
a
working
assumption
until
consensus
is
formed
and
may
be
removed
later.
</p>
</div>
<div class="ednote">
<div class="ednote-title marker" aria-level="5" role="heading" id="h-ednote4">
<span>
Editor's
note
</span>
</div>
<p class="">
The
<a href="#dom-thingfilter" class="internalDFN" data-link-type="dfn">
<code>
ThingFilter
</code>
</a>
dictionary
may
be
extended
later
with
further
attributes.
</p>
</div>
</section>
<section data-dfn-for="DiscoveryMethod" id="the-discoverymethod-enumeration">
<h4 id="x3.1.2-the-discoverymethod-enumeration">
<span class="secno">
3.1.2
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-discoverymethod" data-idl="" data-title="DiscoveryMethod">
<code>
DiscoveryMethod
</code>
</dfn>
enumeration
</h4>
<div>
                    <pre class="def idl"><span class="idlEnum" id="idl-def-discoverymethod" data-idl="" data-title="DiscoveryMethod">enum <span class="idlEnumID"><a data-lt="DiscoveryMethod" href="#dom-discoverymethod" class="internalDFN" data-link-type="dfn" data-for=""><code>DiscoveryMethod</code></a></span> {
    <a href="#dom-discoverymethod-any" class="idlEnumItem">"any"</a>,
    <a href="#dom-discoverymethod-local" class="idlEnumItem">"local"</a>,
    <a href="#dom-discoverymethod-nearby" class="idlEnumItem">"nearby"</a>,
    <a href="#dom-discoverymethod-directory" class="idlEnumItem">"directory"</a>,
    <a href="#dom-discoverymethod-broadcast" class="idlEnumItem">"broadcast"</a>,
    <a href="#dom-discoverymethod-other" class="idlEnumItem">"other"</a>
};
</span>
</pre>
</div>
<p>
The
<a href="#dom-discoverymethod" class="internalDFN" data-link-type="dfn">
<code>
DiscoveryMethod
</code>
</a>
enumeration
represents
the
discovery
type
to
be
used:
</p>
<ul>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-any" data-idl="" data-title="any">
<code>
any
</code>
</dfn>
"
does
not
provide
any
restriction
</li>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-local" data-idl="" data-title="local">
<code>
local
</code>
</dfn>
"
for
discovering
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
defined
in
the
same
device
</li>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-nearby" data-idl="" data-title="nearby">
<code>
nearby
</code>
</dfn>
"
for
discovering
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
nearby
the
device,
e.g.
by
Bluetooth
or
NFC
</li>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-directory" data-idl="" data-title="directory">
<code>
directory
</code>
</dfn>
"
for
discovery
based
on
a
service
provided
by
a
directory
or
repository
of
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
</li>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-broadcast" data-idl="" data-title="broadcast">
<code>
broadcast
</code>
</dfn>
"
for
an
open
ended
discovery
based
on
sending
a
request
to
a
broadcast
address
</li>
<li>
"
<dfn data-dfn-for="discoverymethod" data-dfn-type="dfn" id="dom-discoverymethod-other" data-idl="" data-title="other">
<code>
other
</code>
</dfn>
"
for
a
proprietary
method
defined
by
the
solution.
</li>
</ul>
</section>
</section>
<section id="the-consume()-method">
<h3 id="x3.2-the-consume()-method">
<span class="secno">
3.2
</span>
The
<dfn data-dfn-for="wot" data-dfn-type="dfn" id="dom-wot-consume()" data-idl="" data-title="consume()" data-lt="consume()|consume">
<code>
consume()
</code>
</dfn>
method
</h3>
<p>
Accepts
an
<code>
url
</code>
argument
and
returns
a
<code>
<a href="#dfn-promise" class="internalDFN" data-link-type="dfn">
Promise
</a>
</code>
of
a
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>.
</p>
</section>
<section id="the-expose()-method">
<h3 id="x3.3-the-expose()-method">
<span class="secno">
3.3
</span>
The
<dfn data-dfn-for="wot" data-dfn-type="dfn" id="dom-wot-expose()" data-idl="" data-title="expose()" data-lt="expose()|expose">
<code>
expose()
</code>
</dfn>
method
</h3>
<p>
Returns
a
<code>
<a href="#dfn-promise" class="internalDFN" data-link-type="dfn">
Promise
</a>
</code>
of
a
locally
created
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
based
on
the
provided
initialization
parameters.
</p>
<div class="ednote">
<div class="ednote-title marker" aria-level="4" role="heading" id="h-ednote5">
<span>
Editor's
note
</span>
</div>
<p class="">
The
reason
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
s
are
created
by
a
factory
method
instead
of
a
constructor
is
that
an
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
may
be
created
in
the
local
<a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn">
WoT
Runtime
</a>
or
in
a
remote
runtime.
Even
though
currently
only
local
creation
is
supported,
the
method
is
designed
with
this
possible
future
compatibility
in
mind.
</p>
</div>
<section data-dfn-for="ThingInit" id="the-thinginit-dictionary">
<h4 id="x3.3.1-the-thinginit-dictionary">
<span class="secno">
3.3.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thinginit" data-idl="" data-title="ThingInit">
<code>
ThingInit
</code>
</dfn>
dictionary
</h4>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-thinginit" data-idl="" data-title="ThingInit">dictionary <span class="idlDictionaryID"><a data-lt="ThingInit" href="#dom-thinginit" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingInit</code></a></span> {
<span class="idlMember" id="idl-def-thinginit-name" data-idl="" data-title="name" data-dfn-for="thinginit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlMemberName"><a data-lt="name" href="#dom-thinginit-name" class="internalDFN" data-link-type="dfn" data-for="ThingInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thinginit-url" data-idl="" data-title="url" data-dfn-for="thinginit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="url" href="#dom-thinginit-url" class="internalDFN" data-link-type="dfn" data-for="ThingInit"><code>url</code></a></span>;</span>
<span class="idlMember" id="idl-def-thinginit-description" data-idl="" data-title="description" data-dfn-for="thinginit">    <span class="idlMemberType">Dictionary</span> <span class="idlMemberName"><a data-lt="description" href="#dom-thinginit-description" class="internalDFN" data-link-type="dfn" data-for="ThingInit"><code>description</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<a href="#dom-thinginit" class="internalDFN" data-link-type="dfn">
<code>
ThingInit
</code>
</a>
dictionary
contains
properties
to
initialize
a
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>:
</p>
<ul>
<li>
The
<dfn data-dfn-for="thinginit" data-dfn-type="dfn" id="dom-thinginit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
user
given
name
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
The
<dfn data-dfn-for="thinginit" data-dfn-type="dfn" id="dom-thinginit-url" data-idl="" data-title="url">
<code>
url
</code>
</dfn>
attribute
represents
the
address
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
The
<dfn data-dfn-for="thinginit" data-dfn-type="dfn" id="dom-thinginit-description" data-idl="" data-title="description">
<code>
description
</code>
</dfn>
attribute
represents
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
</ul>
</section>
</section>
<section id="examples">
<h3 id="x3.4-examples">
<span class="secno">
3.4
</span>
Examples
</h3>
<div class="example">
<div class="example-title marker">
<span>
Example
1
</span>
<span style="text-transform: none">:
Discover
Things
via
directory
</span>
</div>
                <pre class="hljs javascript" aria-busy="false" aria-live="polite"><span class="hljs-keyword">let</span> discoveryType = { <span class="hljs-attr">method</span>: <span class="hljs-string">"directory"</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">"http://directory.wotservice.org"</span> };
<span class="hljs-keyword">let</span> subscription = wot.discover(discoveryType).subscribe(
  <span class="hljs-function"><span class="hljs-params">thing</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found Thing "</span> + thing.url); },
  error =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished because an error: "</span> + error.message); },
  () =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished successfully"</span>);}
);
setTimeout(
  <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { subscription.unsubscribe(); <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery timeout"</span>); },
<span class="hljs-number">
5000
</span>
);
</pre>
</div>
<div class="note">
<div class="note-title marker" aria-level="4" role="heading" id="h-note3">
<span>
Note
</span>
</div>
<p class="">
Note
that
canceling
a
discovery
(through
unsubscribe)
may
not
be
successful
in
all
cases,
for
instance
when
discovery
is
based
on
open
ended
broadcast
requests.
However,
once
<code>
unsubscribe()
</code>
has
been
called,
implementations
<em class="rfc2119" title="MUST">
MUST
</em>
suppress
further
event
handling
(
i.e.
further
discoveries
and
errors)
on
the
Observable.
Also,
a
discovery
error
may
not
mean
the
end
of
the
discovery
process.
However,
in
order
to
respect
Observable
semantics
(error
always
terminates
processing),
implementations
<em class="rfc2119" title="MUST">
MUST
</em>
close
or
suppress
further
event
handling
on
the
Observable.
</p>
</div>
<div class="example">
<div class="example-title marker">
<span>
Example
2
</span>
<span style="text-transform: none">:
Discover
Things
exposed
by
local
hardware
</span>
</div>
                <pre class="hljs javascript" aria-busy="false" aria-live="polite"><span class="hljs-keyword">let</span> subscription = wot.discover({ <span class="hljs-attr">method</span>: <span class="hljs-string">"local"</span> }).subscribe(
  <span class="hljs-function"><span class="hljs-params">thing</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found local Thing "</span> + thing.url); },
  error =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished successfully"</span>);}
);
</pre>
</div>
<div class="example">
<div class="example-title marker">
<span>
Example
3
</span>
<span style="text-transform: none">:
Discover
Things
exposed
nearby,
e.g.
via
Bluetooth
</span>
</div>
                <pre class="hljs javascript" aria-busy="false" aria-live="polite"><span class="hljs-keyword">let</span> subscription = wot.discover({ <span class="hljs-attr">method</span>: <span class="hljs-string">"nearby"</span>, <span class="hljs-attr">description</span>: {<span class="hljs-attr">protocol</span>: <span class="hljs-string">"BLE4.2"</span>} }).subscribe(
  <span class="hljs-function"><span class="hljs-params">thing</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found nearby Thing "</span> + thing.url); },
  error =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished successfully"</span>);}
);
</pre>
</div>
<div class="example">
<div class="example-title marker">
<span>
Example
4
</span>
<span style="text-transform: none">:
Discover
Things
exposed
in
a
proprietary
way
</span>
</div>
                <pre class="hljs javascript" aria-busy="false" aria-live="polite"><span class="hljs-keyword">let</span> subscription = wot.discover({ <span class="hljs-attr">method</span>: <span class="hljs-string">"other"</span>, <span class="hljs-attr">description</span>: { <span class="hljs-attr">solution</span>: <span class="hljs-string">"XYZ123"</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">"..."</span>} }).subscribe(
  <span class="hljs-function"><span class="hljs-params">thing</span> =&gt;</span> { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Found Thing "</span> + thing.url); },
  error =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished successfully"</span>);}
);
</pre>
</div>
</section>
</section>
<section data-dfn-for="ConsumedThing" id="the-consumedthing-interface">
<h2 id="x4.-the-consumedthing-interface">
<span class="secno">
4.
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-consumedthing" data-idl="" data-title="ConsumedThing">
<code>
ConsumedThing
</code>
</dfn>
interface
</h2>
<p>
The
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>
interface
is
a
client
API
for
sending
requests
to
servers
in
order
to
retrieve
or
update
properties,
invoke
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>,
and
observe
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
</p>
<div>
            <pre class="def idl"><span class="idlInterface" id="idl-def-consumedthing" data-idl="" data-title="ConsumedThing">interface <span class="idlInterfaceID"><a data-lt="ConsumedThing" href="#dom-consumedthing" class="internalDFN" data-link-type="dfn" data-for=""><code>ConsumedThing</code></a></span> {
<span class="idlAttribute" id="idl-def-consumedthing-name" data-idl="" data-title="name" data-dfn-for="consumedthing">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>        <span class="idlAttrName"><a data-lt="name" href="#dom-consumedthing-name" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing"><code>name</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-consumedthing-url" data-idl="" data-title="url" data-dfn-for="consumedthing">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>        <span class="idlAttrName"><a data-lt="url" href="#dom-consumedthing-url" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing"><code>url</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-consumedthing-description" data-idl="" data-title="description" data-dfn-for="consumedthing">    readonly attribute <span class="idlAttrType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span> <span class="idlAttrName"><a data-lt="description" href="#dom-consumedthing-description" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing"><code>description</code></a></span>;</span>
<span class="idlMethod" id="idl-def-consumedthing-invokeaction(name,parameters)" data-idl="" data-title="invokeAction" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span>  <span class="idlMethName"><a data-lt="invokeAction()|invokeaction()|invokeAction" data-lt-nodefault="" href="#dom-consumedthing-invokeaction()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">invokeAction</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">parameters</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-setproperty(name,value)" data-idl="" data-title="setProperty" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="setProperty()|setproperty()|setProperty" data-lt-nodefault="" href="#dom-consumedthing-setproperty()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">setProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">value</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-getproperty(name)" data-idl="" data-title="getProperty" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span>  <span class="idlMethName"><a data-lt="getProperty()|getproperty()|getProperty" data-lt-nodefault="" href="#dom-consumedthing-getproperty()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">getProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-addlistener(eventname,listener)" data-idl="" data-title="addListener" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn"><code>ConsumedThing</code></a></span> <span class="idlMethName"><a data-lt="addListener()|addlistener()|addListener" data-lt-nodefault="" href="#dom-consumedthing-addlistener()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">addListener</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">eventName</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-thingeventlistener" class="internalDFN" data-link-type="dfn"><code>ThingEventListener</code></a></span> <span class="idlParamName">listener</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-removelistener(eventname,listener)" data-idl="" data-title="removeListener" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn"><code>ConsumedThing</code></a></span> <span class="idlMethName"><a data-lt="removeListener()|removelistener()|removeListener" data-lt-nodefault="" href="#dom-consumedthing-removelistener()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">removeListener</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">eventName</span></span>,
                                 <span class="idlParam"><span class="idlParamType"><a href="#dom-thingeventlistener" class="internalDFN" data-link-type="dfn"><code>ThingEventListener</code></a></span> <span class="idlParamName">listener</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-removealllisteners(eventname)" data-idl="" data-title="removeAllListeners" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn"><code>ConsumedThing</code></a></span> <span class="idlMethName"><a data-lt="removeAllListeners()|removealllisteners()|removeAllListeners" data-lt-nodefault="" href="#dom-consumedthing-removealllisteners()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">removeAllListeners</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">eventName</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-observe(name,requesttype)" data-idl="" data-title="observe" data-dfn-for="consumedthing">    <span class="idlMethType"><a href="#dfn-observable" class="internalDFN" data-link-type="dfn">Observable</a></span>    <span class="idlMethName"><a data-lt="observe()|observe()|observe" data-lt-nodefault="" href="#dom-consumedthing-observe()" class="internalDFN" data-link-type="dfn" data-for="ConsumedThing">observe</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-requesttype" class="internalDFN" data-link-type="dfn"><code>RequestType</code></a></span> <span class="idlParamName">requestType</span></span>);</span>
};</span>
<span class="idlCallback" id="idl-def-thingeventlistener" data-idl="" data-title="ThingEventListener">
callback
<span class="idlCallbackID">
<a data-lt="ThingEventListener" href="#dom-thingeventlistener" class="internalDFN" data-link-type="dfn" data-for="">
<code>
ThingEventListener
</code>
</a>
</span>
=
<span class="idlCallbackType">
void
</span>
(
<span class="idlParam">
<span class="idlParamType">
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
</span>
<span class="idlParamName">
event
</span>
</span>
);
</span>
</pre>
</div>
<p>
Represents
a
local
proxy
object
of
the
remote
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
<ul>
<li>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
read-only
attribute
represents
the
name
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-url" data-idl="" data-title="url">
<code>
url
</code>
</dfn>
read-only
attribute
represents
the
URL
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</li>
<li>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-description" data-idl="" data-title="description">
<code>
description
</code>
</dfn>
attribute
read-only
attribute
represents
the
description
of
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
<div class="ednote">
<div class="ednote-title marker" aria-level="3" role="heading" id="h-ednote6">
<span>
Editor's
note
</span>
</div>
<p class="">
Parsing
and
exposing
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
s
is
discussed
in
<a href="https://github.com/w3c/wot-scripting-api/issues/38">
Issue
38
</a>.
</p>
</div>
</li>
</ul>
<section id="the-invokeaction()-method">
<h3 id="x4.1-the-invokeaction()-method">
<span class="secno">
4.1
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-invokeaction()" data-idl="" data-title="invokeAction()" data-lt="invokeaction()|invokeAction">
<code>
invokeAction()
</code>
</dfn>
method
</h3>
<p>
Takes
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
name
from
the
<var>
name
</var>
argument
and
the
list
of
parameters,
then
requests
from
the
underlying
platform
and
the
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
to
invoke
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
on
the
remote
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
and
return
the
result.
Returns
a
<code>
<a href="#dfn-promise" class="internalDFN" data-link-type="dfn">
Promise
</a>
</code>
that
resolves
with
the
return
value
or
rejects
with
an
<a href="#dfn-error" class="internalDFN" data-link-type="dfn">
Error
</a>.
</p>
</section>
<section id="the-setproperty()-method">
<h3 id="x4.2-the-setproperty()-method">
<span class="secno">
4.2
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-setproperty()" data-idl="" data-title="setProperty()" data-lt="setproperty()|setProperty">
<code>
setProperty()
</code>
</dfn>
method
</h3>
<p>
Takes
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
name
as
the
<var>
name
</var>
argument
and
the
new
value
as
the
<var>
value
</var>
argument,
then
requests
from
the
underlying
platform
and
the
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
to
update
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
on
the
remote
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
and
return
the
result.
Returns
a
<code>
<a href="#dfn-promise" class="internalDFN" data-link-type="dfn">
Promise
</a>
</code>
that
resolves
on
success
or
rejects
with
an
<a href="#dfn-error" class="internalDFN" data-link-type="dfn">
Error
</a>.
</p>
</section>
<section id="the-getproperty()-method">
<h3 id="x4.3-the-getproperty()-method">
<span class="secno">
4.3
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-getproperty()" data-idl="" data-title="getProperty()" data-lt="getproperty()|getProperty">
<code>
getProperty()
</code>
</dfn>
method
</h3>
<p>
Takes
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
name
as
the
<var>
name
</var>
argument,
then
requests
from
the
underlying
platform
and
the
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
to
retrieve
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
on
the
remote
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
and
return
the
result.
Returns
a
<code>
<a href="#dfn-promise" class="internalDFN" data-link-type="dfn">
Promise
</a>
</code>
that
resolves
with
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
value
or
rejects
with
an
<a href="#dfn-error" class="internalDFN" data-link-type="dfn">
Error
</a>.
</p>
</section>
<section id="the-addlistener()-method">
<h3 id="x4.4-the-addlistener()-method">
<span class="secno">
4.4
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-addlistener()" data-idl="" data-title="addListener()" data-lt="addlistener()|addListener">
<code>
addListener()
</code>
</dfn>
method
</h3>
<p>
Adds
the
listener
provided
in
the
argument
<var>
listener
</var>
to
the
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
name
provided
in
the
argument
<var>
eventName
</var>.
</p>
</section>
<section id="the-removelistener()-method">
<h3 id="x4.5-the-removelistener()-method">
<span class="secno">
4.5
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-removelistener()" data-idl="" data-title="removeListener()" data-lt="removelistener()|removeListener">
<code>
removeListener()
</code>
</dfn>
method
</h3>
<p>
Removes
a
listener
from
the
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
identified
by
the
provided
<var>
eventName
</var>
and
<var>
listener
</var>
argument.
</p>
</section>
<section id="the-removealllisteners()-method">
<h3 id="x4.6-the-removealllisteners()-method">
<span class="secno">
4.6
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-removealllisteners()" data-idl="" data-title="removeAllListeners()" data-lt="removealllisteners()|removeAllListeners">
<code>
removeAllListeners()
</code>
</dfn>
method
</h3>
<p>
Removes
all
listeners
for
the
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
provided
by
the
<var>
eventName
</var>
optional
argument,
or
if
that
was
not
provided,
then
removes
all
listeners
from
all
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
</p>
</section>
<section id="the-observe()-method">
<h3 id="x4.7-the-observe()-method">
<span class="secno">
4.7
</span>
The
<dfn data-dfn-for="consumedthing" data-dfn-type="dfn" id="dom-consumedthing-observe()" data-idl="" data-title="observe()" data-lt="observe()|observe">
<code>
observe()
</code>
</dfn>
method
</h3>
<p>
Returns
an
<a href="#dfn-observable" class="internalDFN" data-link-type="dfn">
Observable
</a>
for
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
or
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
specified
in
the
<var>
name
</var>
argument,
allowing
subscribing
and
unsubscribing
to
notifications.
The
<var>
requestType
</var>
specifies
whether
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
an
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
or
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
is
observed.
</p>
<div class="ednote">
<div class="ednote-title marker" aria-level="4" role="heading" id="h-ednote7">
<span>
Editor's
note
</span>
</div>
<p class="">
The
<code>
observe()
</code>
method
could
replace
<code>
addListener()
</code>
and
<code>
removeListener()
</code>,
though
they
could
be
kept
for
convenience.
</p>
</div>
</section>
<section data-dfn-for="ThingEventListener" id="the-thingeventlistener-callback">
<h3 id="x4.8-the-thingeventlistener-callback">
<span class="secno">
4.8
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingeventlistener" data-idl="" data-title="ThingEventListener">
<code>
ThingEventListener
</code>
</dfn>
callback
</h3>
<p>
A
function
called
with
an
<a data-lt="DOM-Level-2-Events" href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
object
when
an
event
is
emitted.
</p>
</section>
<section id="events">
<h3 id="x4.9-events">
<span class="secno">
4.9
</span>
Events
</h3>
<p>
Clients
can
subscribe
to
the
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
defined
in
<a href="#events-supported-by-exposedthing">
ExposedThing
events
</a>.
The
event
types
are
described
in
this
section.
</p>
<section data-dfn-for="PropertyChangeEvent" id="the-propertychangeevent-interface">
<h4 id="x4.9.1-the-propertychangeevent-interface">
<span class="secno">
4.9.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-propertychangeevent" data-idl="" data-title="PropertyChangeEvent">
<code>
PropertyChangeEvent
</code>
</dfn>
interface
</h4>
<div>
                    <pre class="def idl"><span class="idlInterface" id="idl-def-propertychangeevent" data-idl="" data-title="PropertyChangeEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-propertychangeeventinit" class="internalDFN" data-link-type="dfn"><code>PropertyChangeEventInit</code></a></span> <span class="idlParamName">init</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="PropertyChangeEvent" href="#dom-propertychangeevent" class="internalDFN" data-link-type="dfn" data-for=""><code>PropertyChangeEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-propertychangeevent-data" data-idl="" data-title="data" data-dfn-for="propertychangeevent">    readonly attribute <span class="idlAttrType"><a href="#dom-propertychangeeventinit" class="internalDFN" data-link-type="dfn"><code>PropertyChangeEventInit</code></a></span> <span class="idlAttrName"><a data-lt="data" href="#dom-propertychangeevent-data" class="internalDFN" data-link-type="dfn" data-for="PropertyChangeEvent"><code>data</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<dfn data-dfn-for="propertychangeevent" data-dfn-type="dfn" id="dom-propertychangeevent-data" data-idl="" data-title="data">
<code>
data
</code>
</dfn>
attribute
represents
the
changed
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</p>
<section data-dfn-for="PropertyChangeEventInit" id="the-propertychangeeventinit-dictionary">
<h5 id="x4.9.1.1-the-propertychangeeventinit-dictionary">
<span class="secno">
4.9.1.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-propertychangeeventinit" data-idl="" data-title="PropertyChangeEventInit">
<code>
PropertyChangeEventInit
</code>
</dfn>
dictionary
</h5>
<div>
                        <pre class="def idl"><span class="idlDictionary" id="idl-def-propertychangeeventinit" data-idl="" data-title="PropertyChangeEventInit">dictionary <span class="idlDictionaryID"><a data-lt="PropertyChangeEventInit" href="#dom-propertychangeeventinit" class="internalDFN" data-link-type="dfn" data-for=""><code>PropertyChangeEventInit</code></a></span> {
<span class="idlMember" id="idl-def-propertychangeeventinit-name" data-idl="" data-title="name" data-dfn-for="propertychangeeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-lt="name" href="#dom-propertychangeeventinit-name" class="internalDFN" data-link-type="dfn" data-for="PropertyChangeEventInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-propertychangeeventinit-value" data-idl="" data-title="value" data-dfn-for="propertychangeeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span>       <span class="idlMemberName"><a data-lt="value" href="#dom-propertychangeeventinit-value" class="internalDFN" data-link-type="dfn" data-for="PropertyChangeEventInit"><code>value</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<dfn data-dfn-for="propertychangeeventinit" data-dfn-type="dfn" id="dom-propertychangeeventinit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
&gt;
attribute
represents
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
name.
</p>
<p>
The
<dfn data-dfn-for="propertychangeeventinit" data-dfn-type="dfn" id="dom-propertychangeeventinit-value" data-idl="" data-title="value">
<code>
value
</code>
</dfn>
attribute
represents
the
new
value
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</p>
</section>
</section>
<section data-dfn-for="ActionInvocationEvent" id="the-actioninvocationevent-interface">
<h4 id="x4.9.2-the-actioninvocationevent-interface">
<span class="secno">
4.9.2
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-actioninvocationevent" data-idl="" data-title="ActionInvocationEvent">
<code>
ActionInvocationEvent
</code>
</dfn>
interface
</h4>
<div>
                    <pre class="def idl"><span class="idlInterface" id="idl-def-actioninvocationevent" data-idl="" data-title="ActionInvocationEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-actioninvocationeventinit" class="internalDFN" data-link-type="dfn"><code>ActionInvocationEventInit</code></a></span> <span class="idlParamName">init</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="ActionInvocationEvent" href="#dom-actioninvocationevent" class="internalDFN" data-link-type="dfn" data-for=""><code>ActionInvocationEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-actioninvocationevent-data" data-idl="" data-title="data" data-dfn-for="actioninvocationevent">    readonly attribute <span class="idlAttrType"><a href="#dom-actioninvocationeventinit" class="internalDFN" data-link-type="dfn"><code>ActionInvocationEventInit</code></a></span> <span class="idlAttrName"><a data-lt="data" href="#dom-actioninvocationevent-data" class="internalDFN" data-link-type="dfn" data-for="ActionInvocationEvent"><code>data</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<dfn data-dfn-for="actioninvocationevent" data-dfn-type="dfn" id="dom-actioninvocationevent-data" data-idl="" data-title="data">
<code>
data
</code>
</dfn>
attribute
represents
the
notification
data
from
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
invocation.
</p>
<section data-dfn-for="ActionInvocationEventInit" id="the-actioninvocationeventinit-dictionary">
<h5 id="x4.9.2.1-the-actioninvocationeventinit-dictionary">
<span class="secno">
4.9.2.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-actioninvocationeventinit" data-idl="" data-title="ActionInvocationEventInit">
<code>
ActionInvocationEventInit
</code>
</dfn>
dictionary
</h5>
<div>
                        <pre class="def idl"><span class="idlDictionary" id="idl-def-actioninvocationeventinit" data-idl="" data-title="ActionInvocationEventInit">dictionary <span class="idlDictionaryID"><a data-lt="ActionInvocationEventInit" href="#dom-actioninvocationeventinit" class="internalDFN" data-link-type="dfn" data-for=""><code>ActionInvocationEventInit</code></a></span> {
<span class="idlMember" id="idl-def-actioninvocationeventinit-actionname" data-idl="" data-title="actionName" data-dfn-for="actioninvocationeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-lt="actionName" href="#dom-actioninvocationeventinit-actionname" class="internalDFN" data-link-type="dfn" data-for="ActionInvocationEventInit"><code>actionName</code></a></span>;</span>
<span class="idlMember" id="idl-def-actioninvocationeventinit-returnvalue" data-idl="" data-title="returnValue" data-dfn-for="actioninvocationeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span>       <span class="idlMemberName"><a data-lt="returnValue" href="#dom-actioninvocationeventinit-returnvalue" class="internalDFN" data-link-type="dfn" data-for="ActionInvocationEventInit"><code>returnValue</code></a></span>;</span>
};
</span>
</pre>
</div>
<div class="ednote">
<div class="ednote-title marker" aria-level="6" role="heading" id="h-ednote8">
<span>
Editor's
note
</span>
</div>
<p class="">
Action
parameters
could
be
also
included,
but
it's
debatable
because
privacy
reasons.
</p>
</div>
<p>
The
<dfn data-dfn-for="actioninvocationeventinit" data-dfn-type="dfn" id="dom-actioninvocationeventinit-actionname" data-idl="" data-title="actionName">
<code>
actionName
</code>
</dfn>
attribute
represents
the
name
of
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
that
has
been
invoked.
</p>
<p>
The
<dfn data-dfn-for="actioninvocationeventinit" data-dfn-type="dfn" id="dom-actioninvocationeventinit-returnvalue" data-idl="" data-title="returnValue">
<code>
returnValue
</code>
</dfn>
attribute
represents
the
return
value
of
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
</p>
</section>
</section>
<section data-dfn-for="ThingDescriptionChangeEvent" id="the-thingdescriptionchangeevent-interface">
<h4 id="x4.9.3-the-thingdescriptionchangeevent-interface">
<span class="secno">
4.9.3
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingdescriptionchangeevent" data-idl="" data-title="ThingDescriptionChangeEvent">
<code>
ThingDescriptionChangeEvent
</code>
</dfn>
interface
</h4>
<div>
                    <pre class="def idl"><span class="idlInterface" id="idl-def-thingdescriptionchangeevent" data-idl="" data-title="ThingDescriptionChangeEvent">[<span class="idlCtor"><span class="extAttrName"><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-thingdescriptionchangeeventinit" class="internalDFN" data-link-type="dfn"><code>ThingDescriptionChangeEventInit</code></a></span> <span class="idlParamName">init</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="ThingDescriptionChangeEvent" href="#dom-thingdescriptionchangeevent" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingDescriptionChangeEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-thingdescriptionchangeevent-data" data-idl="" data-title="data" data-dfn-for="thingdescriptionchangeevent">    readonly attribute <span class="idlAttrType"><a href="#dom-thingdescriptionchangeeventinit" class="internalDFN" data-link-type="dfn"><code>ThingDescriptionChangeEventInit</code></a></span> <span class="idlAttrName"><a data-lt="data" href="#dom-thingdescriptionchangeevent-data" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEvent"><code>data</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<dfn data-dfn-for="thingdescriptionchangeevent" data-dfn-type="dfn" id="dom-thingdescriptionchangeevent-data" data-idl="" data-title="data">
<code>
data
</code>
</dfn>
attribute
represents
the
changes
that
occurred
to
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
<section data-dfn-for="ThingDescriptionChangeEventInit" id="the-thingdescriptionchangeeventinit-dictionary">
<h5 id="x4.9.3.1-the-thingdescriptionchangeeventinit-dictionary">
<span class="secno">
4.9.3.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit" data-idl="" data-title="ThingDescriptionChangeEventInit">
<code>
ThingDescriptionChangeEventInit
</code>
</dfn>
dictionary
</h5>
<div>
                        <pre class="def idl"><span class="idlDictionary" id="idl-def-thingdescriptionchangeeventinit" data-idl="" data-title="ThingDescriptionChangeEventInit">dictionary <span class="idlDictionaryID"><a data-lt="ThingDescriptionChangeEventInit" href="#dom-thingdescriptionchangeeventinit" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingDescriptionChangeEventInit</code></a></span> {
<span class="idlMember" id="idl-def-thingdescriptionchangeeventinit-type" data-idl="" data-title="type" data-dfn-for="thingdescriptionchangeeventinit">    <span class="idlMemberType"><a href="#dom-tdchangetype" class="internalDFN" data-link-type="dfn"><code>TDChangeType</code></a></span>     <span class="idlMemberName"><a data-lt="type" href="#dom-thingdescriptionchangeeventinit-type" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEventInit"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingdescriptionchangeeventinit-method" data-idl="" data-title="method" data-dfn-for="thingdescriptionchangeeventinit">    <span class="idlMemberType"><a href="#dom-tdchangemethod" class="internalDFN" data-link-type="dfn"><code>TDChangeMethod</code></a></span>   <span class="idlMemberName"><a data-lt="method" href="#dom-thingdescriptionchangeeventinit-method" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEventInit"><code>method</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingdescriptionchangeeventinit-name" data-idl="" data-title="name" data-dfn-for="thingdescriptionchangeeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>        <span class="idlMemberName"><a data-lt="name" href="#dom-thingdescriptionchangeeventinit-name" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEventInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingdescriptionchangeeventinit-data" data-idl="" data-title="data" data-dfn-for="thingdescriptionchangeeventinit">    <span class="idlMemberType"><a href="#dom-tdchangedata" class="internalDFN" data-link-type="dfn"><code>TDChangeData</code></a></span>     <span class="idlMemberName"><a data-lt="data" href="#dom-thingdescriptionchangeeventinit-data" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEventInit"><code>data</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingdescriptionchangeeventinit-description" data-idl="" data-title="description" data-dfn-for="thingdescriptionchangeeventinit">    <span class="idlMemberType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span> <span class="idlMemberName"><a data-lt="description" href="#dom-thingdescriptionchangeeventinit-description" class="internalDFN" data-link-type="dfn" data-for="ThingDescriptionChangeEventInit"><code>description</code></a></span>;</span>
};
</span>
</pre>
</div>
<ul>
<li>
The
<dfn data-dfn-for="thingdescriptionchangeeventinit" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit-type" data-idl="" data-title="type">
<code>
type
</code>
</dfn>
attribute
represents
the
change
type,
whether
has
it
been
applied
on
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
or
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
</li>
<li>
The
<dfn data-dfn-for="thingdescriptionchangeeventinit" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit-method" data-idl="" data-title="method">
<code>
method
</code>
</dfn>
attribute
tells
what
operation
has
been
applied,
addition,
removal
or
change.
</li>
<li>
The
<dfn data-dfn-for="thingdescriptionchangeeventinit" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
or
event
that
has
changed.
</li>
<li>
The
<dfn data-dfn-for="thingdescriptionchangeeventinit" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit-description" data-idl="" data-title="description">
<code>
description
</code>
</dfn>
attribute
is
defined
for
the
addition
and
change
methods,
and
represents
the
new
description.
</li>
<li>
The
<dfn data-dfn-for="thingdescriptionchangeeventinit" data-dfn-type="dfn" id="dom-thingdescriptionchangeeventinit-data" data-idl="" data-title="data">
<code>
data
</code>
</dfn>
attribute
provides
the
initialization
data
for
the
added
or
changed
elements.
</li>
</ul>
<section data-dfn-for="TDChangeMethod" id="the-tdchangemethod-enumeration">
<h6 id="x4.9.3.1.1-the-tdchangemethod-enumeration">
<span class="secno">
4.9.3.1.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-tdchangemethod" data-idl="" data-title="TDChangeMethod">
<code>
TDChangeMethod
</code>
</dfn>
enumeration
</h6>
<div>
                            <pre class="def idl"><span class="idlEnum" id="idl-def-tdchangemethod" data-idl="" data-title="TDChangeMethod">enum <span class="idlEnumID"><a data-lt="TDChangeMethod" href="#dom-tdchangemethod" class="internalDFN" data-link-type="dfn" data-for=""><code>TDChangeMethod</code></a></span> {
    <a href="#dom-tdchangemethod-add" class="idlEnumItem">"add"</a>,
    <a href="#dom-tdchangemethod-remove" class="idlEnumItem">"remove"</a>,
    <a href="#dom-tdchangemethod-change" class="idlEnumItem">"change"</a>
};
</span>
</pre>
</div>
<ul>
<li>
The
<dfn data-dfn-for="tdchangemethod" data-dfn-type="dfn" id="dom-tdchangemethod-add" data-idl="" data-title="add">
<code>
add
</code>
</dfn>
value
denotes
addition
of
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
or
event.
</li>
<li>
The
<dfn data-dfn-for="tdchangemethod" data-dfn-type="dfn" id="dom-tdchangemethod-remove" data-idl="" data-title="remove">
<code>
remove
</code>
</dfn>
value
denotes
removal
of
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
or
event.
</li>
<li>
The
<dfn data-dfn-for="tdchangemethod" data-dfn-type="dfn" id="dom-tdchangemethod-change" data-idl="" data-title="change">
<code>
change
</code>
</dfn>
value
denotes
a
change
applied
on
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
or
event.
</li>
</ul>
</section>
<section data-dfn-for="TDChangeType" id="the-tdchangetype-enumeration">
<h6 id="x4.9.3.1.2-the-tdchangetype-enumeration">
<span class="secno">
4.9.3.1.2
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-tdchangetype" data-idl="" data-title="TDChangeType">
<code>
TDChangeType
</code>
</dfn>
enumeration
</h6>
<div>
                            <pre class="def idl"><span class="idlEnum" id="idl-def-tdchangetype" data-idl="" data-title="TDChangeType">enum <span class="idlEnumID"><a data-lt="TDChangeType" href="#dom-tdchangetype" class="internalDFN" data-link-type="dfn" data-for=""><code>TDChangeType</code></a></span> {
    <a href="#dom-tdchangetype-property" class="idlEnumItem">"property"</a>,
    <a href="#dom-tdchangetype-action" class="idlEnumItem">"action"</a>,
    <a href="#dom-tdchangetype-event" class="idlEnumItem">"event"</a>
};</span>
<span class="idlTypedef" id="idl-def-tdchangedata" data-idl="" data-title="TDChangeData">
typedef
<span class="idlTypedefType">
(
<a href="#dom-thingpropertyinit" class="internalDFN" data-link-type="dfn">
<code>
ThingPropertyInit
</code>
</a>
or
<a href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn">
<code>
ThingActionInit
</code>
</a>
or
<a href="#dom-thingeventinit" class="internalDFN" data-link-type="dfn">
<code>
ThingEventInit
</code>
</a>
)
</span>
<span class="idlTypedefID">
<a data-lt="TDChangeData" href="#dom-tdchangedata" class="internalDFN" data-link-type="dfn" data-for="">
<code>
TDChangeData
</code>
</a>
</span>
;
</span>
</pre>
</div>
<ul>
<li>
The
<dfn data-dfn-for="tdchangetype" data-dfn-type="dfn" id="dom-tdchangetype-property" data-idl="" data-title="property">
<code>
property
</code>
</dfn>
value
tells
the
operation
was
applied
on
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
definition.
</li>
<li>
The
<dfn data-dfn-for="tdchangetype" data-dfn-type="dfn" id="dom-tdchangetype-action" data-idl="" data-title="action">
<code>
action
</code>
</dfn>
value
tells
the
operation
was
applied
on
a
action
definition.
</li>
<li>
The
<dfn data-dfn-for="tdchangetype" data-dfn-type="dfn" id="dom-tdchangetype-event" data-idl="" data-title="event">
<code>
event
</code>
</dfn>
value
tells
the
operation
was
applied
on
an
event
definition.
</li>
</ul>
</section>
<section data-dfn-for="TDChangeData" id="the-tdchangedata-type">
<h6 id="x4.9.3.1.3-the-tdchangedata-type">
<span class="secno">
4.9.3.1.3
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-tdchangedata" data-idl="" data-title="TDChangeData">
<code>
TDChangeData
</code>
</dfn>
type
</h6>
<p>
Represents
the
new
description
of
the
changed
element.
Depending
on
the
change
type,
it
can
be
either
a
<a href="#dom-thingpropertyinit" class="internalDFN" data-link-type="dfn">
<code>
ThingPropertyInit
</code>
</a>,
<a href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn">
<code>
ThingActionInit
</code>
</a>,
or
<a href="#dom-thingeventinit" class="internalDFN" data-link-type="dfn">
<code>
ThingEventInit
</code>
</a>.
</p>
</section>
</section>
</section>
</section>
<section id="examples-0">
<h3 id="x4.10-examples">
<span class="secno">
4.10
</span>
Examples
</h3>
<p>
Below
a
<code>
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>
</code>
interface
example
is
given.
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
5
</span>
<span style="text-transform: none">:
Consume
a
Thing
</span>
</div>
                <pre class="hljs javascript" aria-busy="false" aria-live="polite">wot.consume(<span class="hljs-string">"http://mmyservice.org/mySensor"</span>).then( <span class="hljs-function"><span class="hljs-params">thing</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Thing "</span> + thing.name + <span class="hljs-string">" has been consumed."</span>);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"{ "</span> + <span class="hljs-built_in">JSON</span>.serialize(thing) + <span class="hljs-string">" }"</span>);
    thing.addListener(<span class="hljs-string">"onchange"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
        <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> PropertyChangeEvent) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Property "</span> + event.name + <span class="hljs-string">" value has changed to "</span> + event.value);
        }
    }).invokeAction(<span class="hljs-string">"startMeasurement"</span>, [<span class="hljs-string">"Celsius"</span>]);
  },
).catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Discovery finished because an error: "</span> + error.message);
});
</pre>
</div>
</section>
</section>
<section data-dfn-for="ExposedThing" id="the-exposedthing-interface">
<h2 id="x5.-the-exposedthing-interface">
<span class="secno">
5.
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-exposedthing" data-idl="" data-title="ExposedThing">
<code>
ExposedThing
</code>
</dfn>
interface
</h2>
<p>
The
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
interface
is
the
server
API
that
allows
defining
request
handlers,
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>,
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
to
a
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
<div>
            <pre class="def idl"><span class="idlTypedef" id="idl-def-thingdescription" data-idl="" data-title="ThingDescription">typedef <span class="idlTypedefType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlTypedefID"><a data-lt="ThingDescription" href="#dom-thingdescription" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingDescription</code></a></span>;</span>
<span class="idlCallback" id="idl-def-requesthandler" data-idl="" data-title="RequestHandler">callback <span class="idlCallbackID"><a data-lt="RequestHandler" href="#dom-requesthandler" class="internalDFN" data-link-type="dfn" data-for=""><code>RequestHandler</code></a></span> = <span class="idlCallbackType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> (<span class="idlParam"><span class="idlParamType"><a href="#dom-request" class="internalDFN" data-link-type="dfn"><code>Request</code></a></span> <span class="idlParamName">request</span></span>);</span>
<span class="idlInterface" id="idl-def-exposedthing" data-idl="" data-title="ExposedThing">interface <span class="idlInterfaceID"><a data-lt="ExposedThing" href="#dom-exposedthing" class="internalDFN" data-link-type="dfn" data-for=""><code>ExposedThing</code></a></span> {
<span class="idlSectionComment">    // define Thing Description modifiers</span>
<span class="idlMethod" id="idl-def-exposedthing-addproperty(property)" data-idl="" data-title="addProperty" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="addProperty()|addproperty()|addProperty" data-lt-nodefault="" href="#dom-exposedthing-addproperty()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">addProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-thingpropertyinit" class="internalDFN" data-link-type="dfn"><code>ThingPropertyInit</code></a></span> <span class="idlParamName">property</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-removeproperty(name)" data-idl="" data-title="removeProperty" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="removeProperty()|removeproperty()|removeProperty" data-lt-nodefault="" href="#dom-exposedthing-removeproperty()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">removeProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-addaction(action)" data-idl="" data-title="addAction" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="addAction()|addaction()|addAction" data-lt-nodefault="" href="#dom-exposedthing-addaction()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">addAction</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn"><code>ThingActionInit</code></a></span> <span class="idlParamName">action</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-removeaction(name)" data-idl="" data-title="removeAction" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="removeAction()|removeaction()|removeAction" data-lt-nodefault="" href="#dom-exposedthing-removeaction()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">removeAction</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-addevent(event)" data-idl="" data-title="addEvent" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="addEvent()|addevent()|addEvent" data-lt-nodefault="" href="#dom-exposedthing-addevent()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">addEvent</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-thingeventinit" class="internalDFN" data-link-type="dfn"><code>ThingEventInit</code></a></span> <span class="idlParamName">event</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-removeevent(name)" data-idl="" data-title="removeEvent" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="removeEvent()|removeevent()|removeEvent" data-lt-nodefault="" href="#dom-exposedthing-removeevent()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">removeEvent</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlSectionComment">    // define request handlers</span>
<span class="idlMethod" id="idl-def-exposedthing-onretrieveproperty(handler)" data-idl="" data-title="onRetrieveProperty" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="onRetrieveProperty()|onretrieveproperty()|onRetrieveProperty" data-lt-nodefault="" href="#dom-exposedthing-onretrieveproperty()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">onRetrieveProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn"><code>RequestHandler</code></a></span> <span class="idlParamName">handler</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-onupdateproperty(handler)" data-idl="" data-title="onUpdateProperty" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="onUpdateProperty()|onupdateproperty()|onUpdateProperty" data-lt-nodefault="" href="#dom-exposedthing-onupdateproperty()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">onUpdateProperty</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn"><code>RequestHandler</code></a></span> <span class="idlParamName">handler</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-oninvokeaction(handler)" data-idl="" data-title="onInvokeAction" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="onInvokeAction()|oninvokeaction()|onInvokeAction" data-lt-nodefault="" href="#dom-exposedthing-oninvokeaction()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">onInvokeAction</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn"><code>RequestHandler</code></a></span> <span class="idlParamName">handler</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-onobserve(handler)" data-idl="" data-title="onObserve" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn"><code>ExposedThing</code></a></span>  <span class="idlMethName"><a data-lt="onObserve()|onobserve()|onObserve" data-lt-nodefault="" href="#dom-exposedthing-onobserve()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">onObserve</a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn"><code>RequestHandler</code></a></span> <span class="idlParamName">handler</span></span>);</span>
<span class="idlSectionComment">    // define how to expose and run the Thing</span>
<span class="idlMethod" id="idl-def-exposedthing-register(directory)" data-idl="" data-title="register" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="register()|register()|register" data-lt-nodefault="" href="#dom-exposedthing-register()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">register</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">directory</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-unregister(directory)" data-idl="" data-title="unregister" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="unregister()|unregister()|unregister" data-lt-nodefault="" href="#dom-exposedthing-unregister()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">unregister</a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">directory</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-start()" data-idl="" data-title="start" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="start()|start()|start" data-lt-nodefault="" href="#dom-exposedthing-start()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">start</a></span>();</span>
<span class="idlMethod" id="idl-def-exposedthing-stop()" data-idl="" data-title="stop" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="stop()|stop()|stop" data-lt-nodefault="" href="#dom-exposedthing-stop()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">stop</a></span>();</span>
<span class="idlMethod" id="idl-def-exposedthing-emitevent(eventname,payload)" data-idl="" data-title="emitEvent" data-dfn-for="exposedthing">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-lt="emitEvent()|emitevent()|emitEvent" data-lt-nodefault="" href="#dom-exposedthing-emitevent()" class="internalDFN" data-link-type="dfn" data-for="ExposedThing">emitEvent</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">eventName</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">payload</span></span>);</span>
};</span>
<span class="idlImplements">
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
implements
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>
;
</span>
</pre>
</div>
<section data-dfn-for="ThingDescription" id="the-thingdescription-type">
<h3 id="x5.1-the-thingdescription-type">
<span class="secno">
5.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingdescription" data-idl="" data-title="ThingDescription">
<code>
ThingDescription
</code>
</dfn>
type
</h3>
<p>
WoT
provides
a
unified
representation
for
data
exchange
between
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s,
standardized
in
the
<a href="https://w3c.github.io/wot-thing-description/">
Wot
Things
Description
</a>
specification.
</p>
<div class="note">
<div class="note-title marker" aria-level="4" role="heading" id="h-note4">
<span>
Note
</span>
</div>
<p class="">
In
this
version
of
the
API,
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
s
are
represented
as
opaque
strings,
denoting
a
serialized
form,
for
instance
JSON
or
JSON-LD.
See
<a href="https://github.com/w3c/wot-scripting-api/issues/38">
Issue
38
</a>
and
<a href="https://github.com/w3c/wot-scripting-api/issues/45">
Issue
45
</a>.
Parsing
and
composing
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
s
is
left
for
external
libraries
until
standardized
here.
</p>
</div>
</section>
<section data-dfn-for="Request" id="the-request-interface">
<h3 id="x5.2-the-request-interface">
<span class="secno">
5.2
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-request" data-idl="" data-title="Request">
<code>
Request
</code>
</dfn>
interface
</h3>
<div>
                <pre class="def idl"><span class="idlInterface" id="idl-def-request" data-idl="" data-title="Request">interface <span class="idlInterfaceID"><a data-lt="Request" href="#dom-request" class="internalDFN" data-link-type="dfn" data-for=""><code>Request</code></a></span> {
<span class="idlAttribute" id="idl-def-request-type" data-idl="" data-title="type" data-dfn-for="request">    readonly attribute <span class="idlAttrType"><a href="#dom-requesttype" class="internalDFN" data-link-type="dfn"><code>RequestType</code></a></span> <span class="idlAttrName"><a data-lt="type" href="#dom-request-type" class="internalDFN" data-link-type="dfn" data-for="Request"><code>type</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-request-from" data-idl="" data-title="from" data-dfn-for="request">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>   <span class="idlAttrName"><a data-lt="from" href="#dom-request-from" class="internalDFN" data-link-type="dfn" data-for="Request"><code>from</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-request-name" data-idl="" data-title="name" data-dfn-for="request">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>   <span class="idlAttrName"><a data-lt="name" href="#dom-request-name" class="internalDFN" data-link-type="dfn" data-for="Request"><code>name</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-request-options" data-idl="" data-title="options" data-dfn-for="request">    readonly attribute <span class="idlAttrType">Dictionary</span>  <span class="idlAttrName"><a data-lt="options" href="#dom-request-options" class="internalDFN" data-link-type="dfn" data-for="Request"><code>options</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-request-data" data-idl="" data-title="data" data-dfn-for="request">    readonly attribute <span class="idlAttrType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span>         <span class="idlAttrName"><a data-lt="data" href="#dom-request-data" class="internalDFN" data-link-type="dfn" data-for="Request"><code>data</code></a></span>;</span>
<span class="idlMethod" id="idl-def-request-respond(response)" data-idl="" data-title="respond" data-dfn-for="request">    <span class="idlMethType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a></span> <span class="idlMethName"><a data-lt="respond()|respond()|respond" data-lt-nodefault="" href="#dom-request-respond()" class="internalDFN" data-link-type="dfn" data-for="Request">respond</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">response</span></span>);</span>
<span class="idlMethod" id="idl-def-request-respondwitherror(error)" data-idl="" data-title="respondWithError" data-dfn-for="request">    <span class="idlMethType">void</span>    <span class="idlMethName"><a data-lt="respondWithError()|respondwitherror()|respondWithError" data-lt-nodefault="" href="#dom-request-respondwitherror()" class="internalDFN" data-link-type="dfn" data-for="Request">respondWithError</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-Error">Error</a></span> <span class="idlParamName">error</span></span>);</span>
};
</span>
</pre>
</div>
<p>
Represents
an
incoming
request
the
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
is
supposed
to
handle,
for
instance
retrieving
and
updating
properties,
invoking
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
observing
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>
(WoT
interactions).
</p>
<ul>
<li>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-type" data-idl="" data-title="type">
<code>
type
</code>
</dfn>
attribute
represents
the
type
of
the
request
as
defined
in
<a href="#dom-requesttype" class="internalDFN" data-link-type="dfn">
<code>
RequestType
</code>
</a>.
</li>
<li>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-from" data-idl="" data-title="from">
<code>
from
</code>
</dfn>
attribute
represents
the
address
of
the
client
device
issuing
the
request.
The
type
of
the
address
(URL,
UUID
or
other)
is
defined
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</li>
<li>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
to
be
retrieved
or
updated,
or
the
name
of
the
invoked
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>,
or
the
event
name
to
be
observed.
</li>
<li>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-options" data-idl="" data-title="options">
<code>
options
</code>
</dfn>
attribute
represents
the
options
relevant
to
the
request
(e.g.
the
format
or
measurement
units
for
the
returned
value)
as
key-value
pairs.
The
exact
format
is
specified
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</li>
<li>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-data" data-idl="" data-title="data">
<code>
data
</code>
</dfn>
attribute
represents
the
value
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
or
the
input
data
(arguments)
of
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
It
is
not
used
for
retrieve
requests
and
event
requests,
only
for
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
update
and
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
invocation
requests.
</li>
</ul>
<section data-dfn-for="RequestType" id="the-requesttype-enumeration">
<h4 id="x5.2.1-the-requesttype-enumeration">
<span class="secno">
5.2.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-requesttype" data-idl="" data-title="RequestType">
<code>
RequestType
</code>
</dfn>
enumeration
</h4>
<div>
                    <pre class="def idl"><span class="idlEnum" id="idl-def-requesttype" data-idl="" data-title="RequestType">enum <span class="idlEnumID"><a data-lt="RequestType" href="#dom-requesttype" class="internalDFN" data-link-type="dfn" data-for=""><code>RequestType</code></a></span> {
    <a href="#dom-requesttype-property" class="idlEnumItem">"property"</a>,
    <a href="#dom-requesttype-action" class="idlEnumItem">"action"</a>,
    <a href="#dom-requesttype-event" class="idlEnumItem">"event"</a>,
    <a href="#dom-requesttype-td" class="idlEnumItem">"td"</a>
};
</span>
</pre>
</div>
<ul>
<li>
The
value
"
<dfn data-dfn-for="requesttype" data-dfn-type="dfn" id="dom-requesttype-property" data-idl="" data-title="property">
<code>
property
</code>
</dfn>
"
represents
requests
to
retrieve
or
update
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</li>
<li>
The
value
"
<dfn data-dfn-for="requesttype" data-dfn-type="dfn" id="dom-requesttype-action" data-idl="" data-title="action">
<code>
action
</code>
</dfn>
"
represents
requests
to
invoke
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
</li>
<li>
The
value
"
<dfn data-dfn-for="requesttype" data-dfn-type="dfn" id="dom-requesttype-event" data-idl="" data-title="event">
<code>
event
</code>
</dfn>
"
represents
requests
to
emit
an
event.
</li>
<li>
The
value
"
<dfn data-dfn-for="requesttype" data-dfn-type="dfn" id="dom-requesttype-td" data-idl="" data-title="td">
<code>
td
</code>
</dfn>
"
represents
requests
to
change
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>,
i.e.
to
add,
remove
or
modify
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
or
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Events
</a>.
<div class="ednote">
<div class="ednote-title marker" aria-level="5" role="heading" id="h-ednote9">
<span>
Editor's
note
</span>
</div>
<p class="">
This
functionality
is
here
for
the
sake
of
completeness
for
future
versions
of
the
API.
Currently
there
is
no
corresponding
functionality
at
the
<a href="#dom-consumedthing" class="internalDFN" data-link-type="dfn">
<code>
ConsumedThing
</code>
</a>
level
and
it
is
not
guaranteed
that
a
Thing
Description
could
be
remotely
changed
by
scripting.
</p>
</div>
</li>
</ul>
</section>
<section id="the-respond()-method">
<h4 id="x5.2.2-the-respond()-method">
<span class="secno">
5.2.2
</span>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-respond()" data-idl="" data-title="respond()" data-lt="respond()|respond">
<code>
respond()
</code>
</dfn>
method
</h4>
<p>
Sends
a
positive
response
to
the
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
based
on
the
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
and
includes
the
data
specified
by
the
<var>
data
</var>
argument.
</p>
</section>
<section id="the-respondwitherror()-method">
<h4 id="x5.2.3-the-respondwitherror()-method">
<span class="secno">
5.2.3
</span>
The
<dfn data-dfn-for="request" data-dfn-type="dfn" id="dom-request-respondwitherror()" data-idl="" data-title="respondWithError()" data-lt="respondwitherror()|respondWithError">
<code>
respondWithError()
</code>
</dfn>
method
</h4>
<p>
Sends
a
negative
response
to
the
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
based
on
the
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
and
includes
the
error
specified
by
the
<var>
error
</var>
argument.
</p>
</section>
</section>
<section data-dfn-for="RequestHandler" id="the-requesthandler-callback">
<h3 id="x5.3-the-requesthandler-callback">
<span class="secno">
5.3
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-requesthandler" data-idl="" data-title="RequestHandler">
<code>
RequestHandler
</code>
</dfn>
callback
</h3>
<p>
Callback
function
for
handling
interaction
requests.
Receives
an
argument
<var>
request
</var>
of
type
<code>
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
</code>
and
should
return
an
object
or
value
that
is
used
by
<a href="#dfn-protocol-bindings" class="internalDFN" data-link-type="dfn">
Protocol
Bindings
</a>
to
reply
to
the
request.
The
returned
type
is
defined
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
</section>
<section id="the-addproperty()-method">
<h3 id="x5.4-the-addproperty()-method">
<span class="secno">
5.4
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-addproperty()" data-idl="" data-title="addProperty()" data-lt="addproperty()|addProperty">
<code>
addProperty()
</code>
</dfn>
method
</h3>
<p>
Adds
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
defined
by
the
argument
and
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
<section data-dfn-for="ThingPropertyInit" id="the-thingpropertyinit-dictionary">
<h4 id="x5.4.1-the-thingpropertyinit-dictionary">
<span class="secno">
5.4.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingpropertyinit" data-idl="" data-title="ThingPropertyInit">
<code>
ThingPropertyInit
</code>
</dfn>
dictionary
</h4>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-thingpropertyinit" data-idl="" data-title="ThingPropertyInit">dictionary <span class="idlDictionaryID"><a data-lt="ThingPropertyInit" href="#dom-thingpropertyinit" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingPropertyInit</code></a></span> {
<span class="idlMember" id="idl-def-thingpropertyinit-name" data-idl="" data-title="name" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>              <span class="idlMemberName"><a data-lt="name" href="#dom-thingpropertyinit-name" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-configurable" data-idl="" data-title="configurable" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>                <span class="idlMemberName"><a data-lt="configurable" href="#dom-thingpropertyinit-configurable" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>configurable</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-enumerable" data-idl="" data-title="enumerable" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>                <span class="idlMemberName"><a data-lt="enumerable" href="#dom-thingpropertyinit-enumerable" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>enumerable</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-writable" data-idl="" data-title="writable" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>                <span class="idlMemberName"><a data-lt="writable" href="#dom-thingpropertyinit-writable" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>writable</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-semantictypes" data-idl="" data-title="semanticTypes" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-semantictype" class="internalDFN" data-link-type="dfn"><code>SemanticType</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="semanticTypes" href="#dom-thingpropertyinit-semantictypes" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>semanticTypes</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-description" data-idl="" data-title="description" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span>       <span class="idlMemberName"><a data-lt="description" href="#dom-thingpropertyinit-description" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>description</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingpropertyinit-value" data-idl="" data-title="value" data-dfn-for="thingpropertyinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span>                    <span class="idlMemberName"><a data-lt="value" href="#dom-thingpropertyinit-value" class="internalDFN" data-link-type="dfn" data-for="ThingPropertyInit"><code>value</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
Represents
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
description.
</p>
<ul>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-value" data-idl="" data-title="value">
<code>
value
</code>
</dfn>
attribute
represents
the
value
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-configurable" data-idl="" data-title="configurable">
<code>
configurable
</code>
</dfn>
attribute
defines
whether
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
can
be
deleted
from
the
object
and
whether
its
properties
can
be
changed.
The
default
value
is
<code>
false
</code>.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-enumerable" data-idl="" data-title="enumerable">
<code>
enumerable
</code>
</dfn>
attribute
defines
whether
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
can
be
listed
and
iterated.
The
default
value
is
<code>
true
</code>.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-writable" data-idl="" data-title="writable">
<code>
writable
</code>
</dfn>
attribute
defines
whether
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
can
be
updated.
The
default
value
is
<code>
true
</code>.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-semantictypes" data-idl="" data-title="semanticTypes">
<code>
semanticTypes
</code>
</dfn>
attribute
represents
a
list
of
semantic
type
annotations
(e.g.
labels,
classifications
etc)
relevant
to
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>,
represented
as
<a href="#dom-semantictype" class="internalDFN" data-link-type="dfn">
<code>
SemanticType
</code>
</a>
dictionaries.
</li>
<li>
The
<dfn data-dfn-for="thingpropertyinit" data-dfn-type="dfn" id="dom-thingpropertyinit-description" data-idl="" data-title="description">
<code>
description
</code>
</dfn>
attribute
represents
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
description
to
be
added
to
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</li>
</ul>
</section>
<section data-dfn-for="SemanticType" id="the-semantictype-dictionary">
<h4 id="x5.4.2-the-semantictype-dictionary">
<span class="secno">
5.4.2
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-semantictype" data-idl="" data-title="SemanticType">
<code>
SemanticType
</code>
</dfn>
dictionary
</h4>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-semantictype" data-idl="" data-title="SemanticType">dictionary <span class="idlDictionaryID"><a data-lt="SemanticType" href="#dom-semantictype" class="internalDFN" data-link-type="dfn" data-for=""><code>SemanticType</code></a></span> {
<span class="idlMember" id="idl-def-semantictype-name" data-idl="" data-title="name" data-dfn-for="semantictype">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-lt="name" href="#dom-semantictype-name" class="internalDFN" data-link-type="dfn" data-for="SemanticType"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-semantictype-context" data-idl="" data-title="context" data-dfn-for="semantictype">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlMemberName"><a data-lt="context" href="#dom-semantictype-context" class="internalDFN" data-link-type="dfn" data-for="SemanticType"><code>context</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
Represents
a
semantic
type
annotation,
containing
a
name
and
a
context.
</p>
<ul>
<li>
The
<dfn data-dfn-for="semantictype" data-dfn-type="dfn" id="dom-semantictype-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
name
of
the
semantic
type
in
the
given
context.
</li>
<li>
The
<dfn data-dfn-for="semantictype" data-dfn-type="dfn" id="dom-semantictype-context" data-idl="" data-title="context">
<code>
context
</code>
</dfn>
attribute
represents
an
URL
link
to
the
context
of
the
semantic
classification.
</li>
</ul>
<div class="ednote">
<div class="ednote-title marker" aria-level="5" role="heading" id="h-ednote10">
<span>
Editor's
note
</span>
</div>
<p class="">
Semantic
type
examples
to
be
added.
</p>
</div>
</section>
</section>
<section id="the-removeproperty()-method">
<h3 id="x5.5-the-removeproperty()-method">
<span class="secno">
5.5
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-removeproperty()" data-idl="" data-title="removeProperty()" data-lt="removeproperty()|removeProperty">
<code>
removeProperty()
</code>
</dfn>
method
</h3>
<p>
Removes
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
specified
by
the
<code>
name
</code>
argument,
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
and
returns
the
object.
</p>
</section>
<section id="the-addaction()-method">
<h3 id="x5.6-the-addaction()-method">
<span class="secno">
5.6
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-addaction()" data-idl="" data-title="addAction()" data-lt="addaction()|addAction">
<code>
addAction()
</code>
</dfn>
method
</h3>
<p>
Adds
an
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
to
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
object
as
defined
by
the
<code>
action
</code>
argument
of
type
<a href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn">
<code>
ThingActionInit
</code>
</a>
and
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
<section data-dfn-for="ThingActionInit" id="the-thingactioninit-dictionary">
<h4 id="x5.6.1-the-thingactioninit-dictionary">
<span class="secno">
5.6.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingactioninit" data-idl="" data-title="ThingActionInit">
<code>
ThingActionInit
</code>
</dfn>
dictionary
</h4>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-thingactioninit" data-idl="" data-title="ThingActionInit">dictionary <span class="idlDictionaryID"><a data-lt="ThingActionInit" href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingActionInit</code></a></span> {
<span class="idlMember" id="idl-def-thingactioninit-name" data-idl="" data-title="name" data-dfn-for="thingactioninit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>              <span class="idlMemberName"><a data-lt="name" href="#dom-thingactioninit-name" class="internalDFN" data-link-type="dfn" data-for="ThingActionInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingactioninit-inputdatadescription" data-idl="" data-title="inputDataDescription" data-dfn-for="thingactioninit">    <span class="idlMemberType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span>       <span class="idlMemberName"><a data-lt="inputDataDescription" href="#dom-thingactioninit-inputdatadescription" class="internalDFN" data-link-type="dfn" data-for="ThingActionInit"><code>inputDataDescription</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingactioninit-outputdatadescription" data-idl="" data-title="outputDataDescription" data-dfn-for="thingactioninit">    <span class="idlMemberType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span>       <span class="idlMemberName"><a data-lt="outputDataDescription" href="#dom-thingactioninit-outputdatadescription" class="internalDFN" data-link-type="dfn" data-for="ThingActionInit"><code>outputDataDescription</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingactioninit-semantictypes" data-idl="" data-title="semanticTypes" data-dfn-for="thingactioninit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-semantictype" class="internalDFN" data-link-type="dfn"><code>SemanticType</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="semanticTypes" href="#dom-thingactioninit-semantictypes" class="internalDFN" data-link-type="dfn" data-for="ThingActionInit"><code>semanticTypes</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingactioninit-action" data-idl="" data-title="action" data-dfn-for="thingactioninit">    <span class="idlMemberType">Function</span>               <span class="idlMemberName"><a data-lt="action" href="#dom-thingactioninit-action" class="internalDFN" data-link-type="dfn" data-for="ThingActionInit"><code>action</code></a></span>;</span>
};
</span>
</pre>
</div>
<p>
The
<a href="#dom-thingactioninit" class="internalDFN" data-link-type="dfn">
<code>
ThingActionInit
</code>
</a>
dictionary
describes
the
arguments
and
the
return
value.
</p>
<ul>
<li>
The
<dfn data-dfn-for="thingactioninit" data-dfn-type="dfn" id="dom-thingactioninit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
provides
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
name.
</li>
<li>
The
<dfn data-dfn-for="thingactioninit" data-dfn-type="dfn" id="dom-thingactioninit-action" data-idl="" data-title="action">
<code>
action
</code>
</dfn>
attribute
provides
a
function
that
defines
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
</li>
<li>
The
<dfn data-dfn-for="thingactioninit" data-dfn-type="dfn" id="dom-thingactioninit-inputdatadescription" data-idl="" data-title="inputDataDescription">
<code>
inputDataDescription
</code>
</dfn>
attribute
provides
the
description
of
the
input
arguments.
</li>
<li>
The
<dfn data-dfn-for="thingactioninit" data-dfn-type="dfn" id="dom-thingactioninit-outputdatadescription" data-idl="" data-title="outputDataDescription">
<code>
outputDataDescription
</code>
</dfn>
attribute
provides
the
description
of
the
returned
data.
</li>
<li>
The
<dfn data-dfn-for="thingactioninit" data-dfn-type="dfn" id="dom-thingactioninit-semantictypes" data-idl="" data-title="semanticTypes">
<code>
semanticTypes
</code>
</dfn>
attribute
provides
a
list
of
semantic
type
annotations
(e.g.
labels,
classifications
etc)
relevant
to
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>,
represented
as
<a href="#dom-semantictype" class="internalDFN" data-link-type="dfn">
<code>
SemanticType
</code>
</a>
dictionaries.
</li>
</ul>
</section>
</section>
<section id="the-removeaction()-method">
<h3 id="x5.7-the-removeaction()-method">
<span class="secno">
5.7
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-removeaction()" data-idl="" data-title="removeAction()" data-lt="removeaction()|removeAction">
<code>
removeAction()
</code>
</dfn>
method
</h3>
<p>
Removes
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
specified
by
the
<code>
name
</code>
argument,
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
and
returns
the
object.
</p>
</section>
<section id="the-addevent()-method">
<h3 id="x5.8-the-addevent()-method">
<span class="secno">
5.8
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-addevent()" data-idl="" data-title="addEvent()" data-lt="addevent()|addEvent">
<code>
addEvent()
</code>
</dfn>
method
</h3>
<p>
Adds
an
event
to
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
object
as
defined
by
the
<code>
event
</code>
argument
of
type
<a href="#dom-thingeventinit" class="internalDFN" data-link-type="dfn">
<code>
ThingEventInit
</code>
</a>
and
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
<section data-dfn-for="ThingEventInit" id="the-thingeventinit-dictionary">
<h4 id="x5.8.1-the-thingeventinit-dictionary">
<span class="secno">
5.8.1
</span>
The
<dfn data-dfn-for="" data-dfn-type="dfn" id="dom-thingeventinit" data-idl="" data-title="ThingEventInit">
<code>
ThingEventInit
</code>
</dfn>
dictionary
</h4>
<div>
                    <pre class="def idl"><span class="idlDictionary" id="idl-def-thingeventinit" data-idl="" data-title="ThingEventInit">dictionary <span class="idlDictionaryID"><a data-lt="ThingEventInit" href="#dom-thingeventinit" class="internalDFN" data-link-type="dfn" data-for=""><code>ThingEventInit</code></a></span> {
<span class="idlMember" id="idl-def-thingeventinit-name" data-idl="" data-title="name" data-dfn-for="thingeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>              <span class="idlMemberName"><a data-lt="name" href="#dom-thingeventinit-name" class="internalDFN" data-link-type="dfn" data-for="ThingEventInit"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingeventinit-semantictypes" data-idl="" data-title="semanticTypes" data-dfn-for="thingeventinit">    <span class="idlMemberType"><a href="https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-semantictype" class="internalDFN" data-link-type="dfn"><code>SemanticType</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="semanticTypes" href="#dom-thingeventinit-semantictypes" class="internalDFN" data-link-type="dfn" data-for="ThingEventInit"><code>semanticTypes</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingeventinit-datadescription" data-idl="" data-title="dataDescription" data-dfn-for="thingeventinit">    <span class="idlMemberType"><a href="#dom-thingdescription" class="internalDFN" data-link-type="dfn"><code>ThingDescription</code></a></span>       <span class="idlMemberName"><a data-lt="dataDescription" href="#dom-thingeventinit-datadescription" class="internalDFN" data-link-type="dfn" data-for="ThingEventInit"><code>dataDescription</code></a></span>;</span>
};
</span>
</pre>
</div>
<ul>
<li>
The
<dfn data-dfn-for="thingeventinit" data-dfn-type="dfn" id="dom-thingeventinit-name" data-idl="" data-title="name">
<code>
name
</code>
</dfn>
attribute
represents
the
event
name.
</li>
<li>
The
<dfn data-dfn-for="thingeventinit" data-dfn-type="dfn" id="dom-thingeventinit-semantictypes" data-idl="" data-title="semanticTypes">
<code>
semanticTypes
</code>
</dfn>
attribute
represent
a
list
of
semantic
type
annotations
attached
to
the
event.
</li>
<li>
The
<dfn data-dfn-for="thingeventinit" data-dfn-type="dfn" id="dom-thingeventinit-datadescription" data-idl="" data-title="dataDescription">
<code>
dataDescription
</code>
</dfn>
attribute
represents
the
description
of
the
data
that
is
attached
to
the
event.
</li>
</ul>
</section>
</section>
<section id="the-removeevent()-method">
<h3 id="x5.9-the-removeevent()-method">
<span class="secno">
5.9
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-removeevent()" data-idl="" data-title="removeEvent()" data-lt="removeevent()|removeEvent">
<code>
removeEvent()
</code>
</dfn>
method
</h3>
<p>
Removes
the
event
specified
by
the
<code>
name
</code>
argument,
updates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
and
returns
the
object.
</p>
</section>
<section id="the-onretrieveproperty()-method">
<h3 id="x5.10-the-onretrieveproperty()-method">
<span class="secno">
5.10
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-onretrieveproperty()" data-idl="" data-title="onRetrieveProperty()" data-lt="onretrieveproperty()|onRetrieveProperty">
<code>
onRetrieveProperty()
</code>
</dfn>
method
</h3>
<p>
Registers
the
handler
function
for
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
retrieve
requests
received
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>,
as
defined
by
the
<code>
handler
</code>
property
of
type
<code>
<a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn">
<code>
RequestHandler
</code>
</a>
</code>.
The
handler
will
receive
an
argument
<var>
request
</var>
of
type
<code>
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
</code>
where
at
least
<var>
request.name
</var>
is
defined
and
represents
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
to
be
retrieved.
</p>
</section>
<section id="the-onupdateproperty()-method">
<h3 id="x5.11-the-onupdateproperty()-method">
<span class="secno">
5.11
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-onupdateproperty()" data-idl="" data-title="onUpdateProperty()" data-lt="onupdateproperty()|onUpdateProperty">
<code>
onUpdateProperty()
</code>
</dfn>
method
</h3>
<p>
Defines
the
handler
function
for
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
update
requests
received
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>,
as
defined
by
the
<code>
handler
</code>
property
of
type
<code>
<a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn">
<code>
RequestHandler
</code>
</a>
</code>.
The
handler
will
receive
an
argument
<var>
request
</var>
of
type
<code>
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
</code>
where
<var>
request.name
</var>
defines
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
to
be
retrieved
and
<var>
request.data
</var>
defines
the
new
value
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>.
</p>
</section>
<section id="the-oninvokeaction()-method">
<h3 id="x5.12-the-oninvokeaction()-method">
<span class="secno">
5.12
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-oninvokeaction()" data-idl="" data-title="onInvokeAction()" data-lt="oninvokeaction()|onInvokeAction">
<code>
onInvokeAction()
</code>
</dfn>
method
</h3>
<p>
Defines
the
handler
function
for
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
invocation
requests
received
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>,
as
defined
by
the
<code>
handler
</code>
property
of
type
<code>
<a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn">
<code>
RequestHandler
</code>
</a>
</code>.
The
handler
will
receive
an
argument
<var>
request
</var>
of
type
<code>
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
</code>
where
<var>
request.name
</var>
defines
the
name
of
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
to
be
invoked
and
<var>
request.data
</var>
defines
the
input
arguments
for
the
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
as
defined
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
</section>
<section id="the-onobserve()-method">
<h3 id="x5.13-the-onobserve()-method">
<span class="secno">
5.13
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-onobserve()" data-idl="" data-title="onObserve()" data-lt="onobserve()|onObserve">
<code>
onObserve()
</code>
</dfn>
method
</h3>
<p>
Defines
the
handler
function
for
observe
requests
received
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>,
as
defined
by
the
<code>
handler
</code>
property
of
type
<code>
<a href="#dom-requesthandler" class="internalDFN" data-link-type="dfn">
<code>
RequestHandler
</code>
</a>
</code>.
The
handler
will
receive
an
argument
<var>
request
</var>
of
type
<code>
<a href="#dom-request" class="internalDFN" data-link-type="dfn">
<code>
Request
</code>
</a>
</code>
where
</p>
<ul>
<li>
<var>
request.name
</var>
defines
the
name
of
the
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
or
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
or
event
to
be
observed.
</li>
<li>
<var>
request.options.observeType
</var>
is
of
type
<a href="#dom-requesttype" class="internalDFN" data-link-type="dfn">
<code>
RequestType
</code>
</a>
and
defines
whether
a
<a href="#dfn-property" class="internalDFN" data-link-type="dfn">
Property
</a>
change
or
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>
invocation
or
event
emitting
is
observed,
or
the
changes
to
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
are
observed.
</li>
<li>
<var>
request.options.subscribe
</var>
is
<code>
true
</code>
if
subscription
is
turned
or
kept
being
turned
on,
and
it
is
<code>
false
</code>
when
subscription
is
turned
off.
</li>
</ul>
</section>
<section id="the-register()-method">
<h3 id="x5.14-the-register()-method">
<span class="secno">
5.14
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-register()" data-idl="" data-title="register()" data-lt="register()|register">
<code>
register()
</code>
</dfn>
method
</h3>
<p>
Generates
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
given
the
properties,
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
and
<a href="#dfn-event" class="internalDFN" data-link-type="dfn">
Event
</a>
defined
for
this
object.
If
a
<code>
directory
</code>
argument
is
given,
make
a
request
to
register
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
with
the
given
WoT
repository
by
invoking
its
<code>
register
</code>
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
</p>
</section>
<section id="the-unregister()-method">
<h3 id="x5.15-the-unregister()-method">
<span class="secno">
5.15
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-unregister()" data-idl="" data-title="unregister()" data-lt="unregister()|unregister">
<code>
unregister()
</code>
</dfn>
method
</h3>
<p>
If
a
<code>
directory
</code>
argument
is
given,
make
a
request
to
unregister
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>
with
the
given
WoT
repository
by
invoking
its
<code>
unregister
</code>
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Action
</a>.
Then,
and
in
the
case
no
arguments
were
provided
to
this
function,
stop
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
and
remove
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
</section>
<section id="the-start()-method">
<h3 id="x5.16-the-start()-method">
<span class="secno">
5.16
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-start()" data-idl="" data-title="start()" data-lt="start()|start">
<code>
start()
</code>
</dfn>
method
</h3>
<p>
Start
serving
external
requests
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
</section>
<section id="the-stop()-method">
<h3 id="x5.17-the-stop()-method">
<span class="secno">
5.17
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-stop()" data-idl="" data-title="stop()" data-lt="stop()|stop">
<code>
stop()
</code>
</dfn>
method
</h3>
<p>
Stop
serving
external
requests
for
the
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>.
</p>
</section>
<section id="the-emitevent()-method">
<h3 id="x5.18-the-emitevent()-method">
<span class="secno">
5.18
</span>
The
<dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id="dom-exposedthing-emitevent()" data-idl="" data-title="emitEvent()" data-lt="emitevent()|emitEvent">
<code>
emitEvent()
</code>
</dfn>
method
</h3>
<p>
Emits
an
the
event
initialized
with
the
event
name
specified
by
the
<code>
eventName
</code>
argument
and
data
specified
by
the
<code>
payload
</code>
argument.
</p>
</section>
<section data-dfn-for="ExposedThing-Events" id="events-supported-by-exposedthing">
<h3 id="x5.19-events-supported-by-exposedthing">
<span class="secno">
5.19
</span>
Events
supported
by
ExposedThing
</h3>
<p>
The
following
default
events
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
be
supported
by
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
implementations:
</p>
<ul>
<li>
"
<dfn data-dfn-type="dfn" id="dfn-propertychange">
propertychange
</dfn>
"
of
type
<a href="#dom-propertychangeevent" class="internalDFN" data-link-type="dfn">
<code>
PropertyChangeEvent
</code>
</a>
</li>
<li>
"
<dfn data-dfn-type="dfn" id="dfn-actioninvocation">
actioninvocation
</dfn>
"
of
type
<a href="#dom-actioninvocationevent" class="internalDFN" data-link-type="dfn">
<code>
ActionInvocationEvent
</code>
</a>
</li>
<li>
"
<dfn data-dfn-type="dfn" id="dfn-descriptionchange">
descriptionchange
</dfn>
"
of
type
<a href="#dom-thingdescriptionchangeevent" class="internalDFN" data-link-type="dfn">
<code>
ThingDescriptionChangeEvent
</code>
</a>.
</li>
</ul>
<p>
In
addition,
user
defined
events
are
specified
by
the
<a href="#dfn-thing-description" class="internalDFN" data-link-type="dfn">
Thing
Description
</a>.
</p>
</section>
<section id="examples-1">
<h3 id="x5.20-examples">
<span class="secno">
5.20
</span>
Examples
</h3>
<p>
Below
some
<code>
<a href="#dom-exposedthing" class="internalDFN" data-link-type="dfn">
<code>
ExposedThing
</code>
</a>
</code>
interface
examples
are
given.
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
6
</span>
<span style="text-transform: none">:
Create
a
new
blank
exposed
Thing
</span>
</div>
                <pre class="highlight hljs javascript" aria-busy="false" aria-live="polite">WoT.createExposedThing(thingDescription)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">thing</span>) </span>{
    <span class="hljs-comment">// manually add properties, actions, and events</span>
    thing.addProperty({
      <span class="hljs-attr">name</span>: <span class="hljs-string">"temperature"</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-string">"0"</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>
      <span class="hljs-comment">// use default values for the rest</span>
    }).addEvent({
      <span class="hljs-attr">name</span>: <span class="hljs-string">"onchange"</span>,
      <span class="hljs-attr">outputDataDescription</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"float32"</span>
      }
    }).addAction({
      <span class="hljs-attr">name</span>: <span class="hljs-string">"reset"</span>,
      <span class="hljs-attr">action</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { <span class="hljs-keyword">this</span>.temperature = <span class="hljs-number">0</span>; }
    })
    <span class="hljs-comment">// add server functionality</span>
    .onRetrieveProperty( <span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Handling read request"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.temperature;
    }).onObserve( <span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Handling observe request"</span>);
      <span class="hljs-comment">// add listener identified by request.from</span>
    }).onInvokeAction( <span class="hljs-function"><span class="hljs-params">request</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Handling action request"</span>);
    }).start();
});
</pre>
</div>
<div class="example">
<div class="example-title marker">
<span>
Example
7
</span>
<span style="text-transform: none">:
Create
a
new
exposed
Thing
from
a
TD
URI
</span>
</div>
                <pre class="highlight hljs" aria-busy="false" aria-live="polite">let thingDescription = '{
  "name": "mySensor",
  "url": "http://myservice.org/mySensor/description"
}';
WoT.createExposedThing(thingDescription)
  .then(function(thing) {
    // properties, actions and events are added based on the TD
    console.log("created " + thing.name });
    // now add the requests handlers
    thing.onRetrieveProperty(function(request) {
        console.log("Sending property '" + request.property + "' to " + request.from);
    }).onUpdateProperty(function(request) {
        console.log("Updating property '" + request.property + "' by " + request.from);
    }).onObserve(function(request) {
        console.log("Adding listener " + request.from);
        console.log("Observing " + request.type + " " + request.name +
            (request.subscribe? " recursively" : ""));
    }).start().then(function() {
       console.log("Thing started serving requests");
    });
})
</pre>
</div>
<div class="example">
<div class="example-title marker">
<span>
Example
8
</span>
<span style="text-transform: none">:
Create
a
new
exposed
Thing
from
a
Thing
Description
</span>
</div>
                <pre class="highlight hljs" aria-busy="false" aria-live="polite">let thingDescription = '{
  "name": "mySensor",
  "description": {
    "@context": [
      "http://w3c.github.io/wot/w3c-wot-td-context.jsonld",
      "http://w3c.github.io/wot/w3c-wot-common-context.jsonld",
    ],
    "@type": [ "Thing" ],
    "interaction": [
      // ...
    ]
    // ...
  }'
};
WoT.createExposedThing(thingDescription)
  .then(function(thing) {
    // properties, actions and events are added based on the TD
    // ...
});
</pre>
</div>
</section>
</section>
<section>
<h2 id="security">
<span class="secno">
6.
</span>
Security
and
Privacy
</h2>
<div class="ednote">
<div class="ednote-title marker" aria-level="3" role="heading" id="h-ednote11">
<span>
Editor's
note
</span>
</div>
<p class="">
Please
see
the
<a href="https://github.com/w3c/wot-security/">
WoT
Security
and
Privacy
</a>
repository
for
work
in
progress
regarding
threat
models,
assets,
risks,
recommended
mitigations,
and
best
practices
for
security
and
privacy
for
systems
using
the
Web
of
Things.
Once
complete,
security
and
privacy
considerations
relevant
to
the
Scripting
API
will
be
summarized
in
this
section.
</p>
</div>
</section>
<section id="terminology-and-conventions">
<h2 id="x7.-terminology-and-conventions">
<span class="secno">
7.
</span>
Terminology
and
conventions
</h2>
<p>
The
generic
WoT
terminology
is
defined
in
[
<cite>
<a class="bibref" href="#bib-WOT-ARCHITECTURE">
WOT-ARCHITECTURE
</a>
</cite>
]:
<dfn data-dfn-type="dfn" id="dfn-thing">
Thing
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-thing-description">
Thing
Description
</dfn>
(in
short
<dfn data-dfn-type="dfn" id="dfn-td">
TD
</dfn>
),
<dfn data-dfn-type="dfn" id="dfn-web-of-things">
Web
of
Things
</dfn>
(in
short
<b>
<i>
WoT
</i>
</b>
),
<dfn data-dfn-type="dfn" id="dfn-wot-interface">
WoT
Interface
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-protocol-bindings">
Protocol
Bindings
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-wot-runtime">
WoT
Runtime
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-consuming-a-thing-description">
Consuming
a
Thing
Description
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-thing-directory">
Thing
Directory
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-property">
Property
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-action">
Action
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-event">
Event
</dfn>
etc.
</p>
<div class="note">
<div class="note-title marker" aria-level="3" role="heading" id="h-note5">
<span>
Note
</span>
</div>
<p class="">
In
this
version
of
the
specification,
a
<a href="#dfn-wot-runtime" class="internalDFN" data-link-type="dfn">
WoT
Runtime
</a>
is
assumed
to
run
scripts
that
uses
this
API
to
define
one
or
more
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
s
that
share
a
common
event
loop.
Script
deployment
methods
are
out
of
scope
of
this
version.
In
future
versions,
running
multiple
scripts
(as
modules)
may
be
possible,
and
script
deployment
<em class="rfc2119" title="MAY">
MAY
</em>
be
implemented
using
a
manager
<a href="#dfn-thing" class="internalDFN" data-link-type="dfn">
Thing
</a>
whose
<a href="#dfn-action" class="internalDFN" data-link-type="dfn">
Actions
</a>
permit
script
lifecycle
management
operations.
</p>
</div>
<p>
<dfn data-dfn-type="dfn" id="dfn-json-ld">
JSON-LD
</dfn>
is
defined
in
[
<cite>
<a class="bibref" href="#bib-JSON-LD">
JSON-LD
</a>
</cite>
]
as
a
JSON
document
that
is
augmented
with
support
for
Linked
Data
by
providing
a
<code>
@context
</code>
property
with
a
defining
URI
.
</p>
<p>
The
terms
<a href="http://www.w3.org/TR/url-1/">
<dfn data-dfn-type="dfn" id="dfn-url">
URL
</dfn>
</a>
and
<a href="https://url.spec.whatwg.org/#concept-url-path">
<dfn data-dfn-type="dfn" id="dfn-url-path">
URL
path
</dfn>
</a>
are
defined
in
[
<cite>
<a class="bibref" href="#bib-URL">
URL
</a>
</cite>
].
</p>
<p>
The
following
terms
are
defined
in
[
<cite>
<a class="bibref" href="#bib-HTML5">
HTML5
</a>
</cite>
]
and
are
used
in
the
context
of
browser
implementations:
<a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">
<dfn data-dfn-type="dfn" id="dfn-browsing-context">
browsing
context
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#top-level-browsing-context">
<dfn data-dfn-type="dfn" id="dfn-top-level-browsing-context">
top-level
browsing
context
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">
<dfn data-dfn-type="dfn" id="dfn-global-object">
global
object
</dfn>
</a>,
<a href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">
<dfn data-dfn-type="dfn" id="dfn-incumbent-settings-object">
incumbent
settings
object
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#document">
<dfn data-dfn-type="dfn" id="dfn-document">
Document
</dfn>
</a>,
<a href="http://www.w3.org/TR/2011/WD-html5-20110113/urls.html#document-base-url">
<dfn data-dfn-type="dfn" id="dfn-document-base-url">
document
base
URL
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#window">
<dfn data-dfn-type="dfn" id="dfn-window">
Window
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#windowproxy">
<dfn data-dfn-type="dfn" id="dfn-windowproxy">
WindowProxy
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#origin">
<dfn data-dfn-type="dfn" id="dfn-origin">
origin
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#ascii-serialisation-of-an-origin">
<dfn data-dfn-type="dfn" id="dfn-ascii-serialized-origin">
ASCII
serialized
origin
</dfn>
</a>,
executing
algorithms
<a href="https://html.spec.whatwg.org/#in-parallel">
<dfn data-dfn-type="dfn" id="dfn-in-parallel">
in
parallel
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#queue-a-task">
<dfn data-dfn-type="dfn" id="dfn-queue-a-task">
queue
a
task
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#task-source">
<dfn data-dfn-type="dfn" id="dfn-task-source">
task
source
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#the-iframe-element">
<dfn data-dfn-type="dfn" id="dfn-iframe">
iframe
</dfn>
</a>,
<a href="https://html.spec.whatwg.org/#valid-mime-type">
<dfn data-dfn-type="dfn" id="dfn-valid-mime-type">
valid
MIME
type
</dfn>
</a>.
</p>
<p>
A
<a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">
browsing
context
</a>
refers
to
the
environment
in
which
<a href="#dfn-document" class="internalDFN" data-link-type="dfn">
Document
</a>
objects
are
presented
to
the
user.
A
given
<a href="#dfn-browsing-context" class="internalDFN" data-link-type="dfn">
browsing
context
</a>
has
a
single
<code>
<a href="#dfn-windowproxy" class="internalDFN" data-link-type="dfn">
WindowProxy
</a>
</code>
object,
but
it
can
have
many
<code>
<a href="#dfn-document" class="internalDFN" data-link-type="dfn">
Document
</a>
</code>
objects,
with
their
associated
<code>
<a href="#dfn-window" class="internalDFN" data-link-type="dfn">
Window
</a>
</code>
objects.
The
<a href="#dfn-script-execution-context" class="internalDFN" data-link-type="dfn">
script
execution
context
</a>
associated
with
the
<i>
browsing
context
</i>
identifies
the
entity
which
invokes
this
API,
which
can
be
a
<i>
web
app
</i>,
a
<i>
web
page
</i>,
or
an
<a href="#dfn-iframe" class="internalDFN" data-link-type="dfn">
iframe
</a>.
</p>
<p>
The
term
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">
<dfn data-dfn-type="dfn" id="dfn-secure-context">
secure
context
</dfn>
</a>
is
defined
in
[
<cite>
<a class="bibref" href="#bib-WEBAPPSEC">
WEBAPPSEC
</a>
</cite>
].
</p>
<p>
<a href="https://tc39.github.io/ecma262/#sec-error-objects">
<dfn data-dfn-type="dfn" id="dfn-error">
Error
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-evalerror">
EvalError
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-rangeerror">
RangeError
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-referenceerror">
ReferenceError
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-syntaxerror">
SyntaxError
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-typeerror">
TypeError
</dfn>,
<dfn data-dfn-type="dfn" id="dfn-urierror">
URIError
</dfn>
</a>,
<a href="https://tc39.github.io/ecma262/#sec-execution-contexts">
<dfn data-dfn-type="dfn" id="dfn-script-execution-context">
script
execution
context
</dfn>
</a>,
<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">
<dfn data-dfn-type="dfn" id="dfn-promise">
Promise
</dfn>
</a>,
<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json-object">
<dfn data-dfn-type="dfn" id="dfn-json">
JSON
</dfn>
</a>,
<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json.stringify">
<dfn data-dfn-type="dfn" id="dfn-json.stringify">
JSON.stringify
</dfn>
</a>
and
<a href="http://www.ecma-international.org/ecma-262/6.0/#sec-json.parse">
<dfn data-dfn-type="dfn" id="dfn-json.parse">
JSON.parse
</dfn>
</a>
are
defined
in
[
<cite>
<a class="bibref" href="#bib-ECMASCRIPT">
ECMASCRIPT
</a>
</cite>
].
</p>
<p>
<a href="http://heycam.github.io/webidl/#idl-DOMString">
<dfn data-dfn-type="dfn" id="dfn-domstring">
DOMString
</dfn>
</a>,
<a href="https://heycam.github.io/webidl/#idl-USVString">
<dfn data-dfn-type="dfn" id="dfn-usvstring">
USVString
</dfn>
</a>,
<a href="http://heycam.github.io/webidl/#idl-ArrayBuffer">
<dfn data-dfn-type="dfn" id="dfn-arraybuffer">
ArrayBuffer
</dfn>
</a>,
<a href="http://heycam.github.io/webidl/#common-BufferSource">
<dfn data-dfn-type="dfn" id="dfn-buffersource">
BufferSource
</dfn>
</a>
and
<a href="http://heycam.github.io/webidl/#idl-any">
<dfn data-dfn-type="dfn" id="dfn-any">
any
</dfn>
</a>
are
defined
in
[
<cite>
<a class="bibref" href="#bib-WEBIDL">
WEBIDL
</a>
</cite>
].
</p>
<p>
The
term
<b>
<i>
event
</i>
</b>
and
the
<b>
<i>
Event
</i>
</b>
object
are
defined
in
<a href="https://www.w3.org/TR/DOM-Level-2-Events/events.html">
DOM
</a>
and
<a href="https://nodejs.org/api/events.html">
Node.js
</a>.
</p>
<div class="note">
<div class="note-title marker" aria-level="3" role="heading" id="h-note6">
<span>
Note
</span>
</div>
<p class="">
This
specification
uses
the
convention
that
an
event
listener
will
receive
an
<a href="https://www.w3.org/TR/DOM-Level-2-Events/ecma-script-binding.html">
Event
</a>
object.
This
should
work
both
in
a
browser
environment
and
in
a
Node.js
like
environment.
</p>
</div>
<p>
<a href="https://github.com/tc39/proposal-observable">
<dfn data-dfn-type="dfn" id="dfn-observable">
Observable
</dfn>
s
</a>
are
proposed
to
be
included
in
ECMAScript.
</p>
<p>
The
algorithms
<a href="http://www.w3.org/TR/encoding/#utf-8-encode">
<dfn data-dfn-type="dfn" id="dfn-utf-8-encode">
utf-8
encode
</dfn>
</a>,
and
<a href="http://www.w3.org/TR/encoding/#utf-8-decode">
<dfn data-dfn-type="dfn" id="dfn-utf-8-decode">
utf-8
decode
</dfn>
</a>
are
defined
in
[
<cite>
<a class="bibref" href="#bib-ENCODING">
ENCODING
</a>
</cite>
].
</p>
<p>
<dfn data-dfn-type="dfn" id="dfn-iana-media-type">
IANA
media
type
</dfn>
s
(formerly
known
as
MIME
types)
are
defined
in
<a href="http://tools.ietf.org/html/rfc2046">
RFC2046
</a>.
</p>
</section>
<section id="conformance">
<h2 id="x8.-conformance">
<span class="secno">
8.
</span>
Conformance
</h2>
<p>
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</p>
<p id="respecRFC2119">
The
key
words
<em class="rfc2119">
MAY
</em>,
<em class="rfc2119">
MUST
</em>,
and
<em class="rfc2119">
SHOULD
</em>
are
to
be
interpreted
as
described
in
[
<cite>
<a class="bibref" href="#bib-RFC2119">
RFC2119
</a>
</cite>
].
</p>
<p>
This
document
defines
conformance
criteria
that
apply
to
a
single
product:
the
<dfn data-dfn-type="dfn" id="dfn-ua">
UA
</dfn>
(user
agent)
that
implements
the
interfaces
it
contains.
</p>
<p>
This
specification
can
be
used
for
implementing
the
WoT
Scripting
API
in
multiple
programming
languages.
The
interface
definitions
are
specified
in
[
<cite>
<a class="bibref" href="#bib-WEBIDL">
WEBIDL
</a>
</cite>
].
</p>
<p>
The
user
agent
(UA)
may
be
implemented
in
the
browser,
or
in
a
separate
runtime
environment,
such
as
<a href="https://nodejs.org/en/">
Node.js
</a>
or
small
embedded
runtimes.
</p>
<p>
Implementations
that
use
ECMAScript
executed
in
a
browser
to
implement
the
APIs
defined
in
this
document
<em class="rfc2119" title="MUST">
MUST
</em>
implement
them
in
a
manner
consistent
with
the
ECMAScript
Bindings
defined
in
the
Web
IDL
specification
[
<cite>
<a class="bibref" href="#bib-WEBIDL">
WEBIDL
</a>
</cite>
].
</p>
<p>
Implementations
that
use
TypeScript
or
ECMAScript
in
a
runtime
to
implement
the
APIs
defined
in
this
document
<em class="rfc2119" title="MUST">
MUST
</em>
implement
them
in
a
manner
consistent
with
the
TypeScript
Bindings
defined
in
the
TypeScript
specification
[
<cite>
<a class="bibref" href="#bib-TYPESCRIPT">
TYPESCRIPT
</a>
</cite>
].
</p>
<p>
This
document
serves
a
general
description
of
the
WoT
Scripting
API.
Language
and
runtime
specific
issues
are
discussed
in
separate
extensions
of
this
document.
</p>
</section>
<section class="appendix" id="Changes">
<h2 id="a.-changes">
<span class="secno">
A.
</span>
Changes
</h2>
<p>
The
following
is
a
list
of
major
changes
to
the
document.
For
a
complete
list
of
changes,
see
the
<a href="https://github.com/w3c/wot-scripting-api/commits/master">
github
change
log
</a>.
You
can
also
view
the
<a href="https://github.com/w3c/wot-scripting-api/issues?page=1&amp;state=closed">
recently
closed
bugs
</a>.
</p>
</section>
<section>
<h2 class="appendix" id="openissues">
<span class="secno">
B.
</span>
Open
issues
</h2>
<p>
The
following
problems
are
being
discussed
and
need
most
attention:
</p>
<ul>
<li>
Retrieving
information
from
Thing
Description
(
<a href="https://github.com/w3c/wot-scripting-api/issues/38">
https://github.com/w3c/wot-scripting-api/issues/38
</a>
)
</li>
<li>
Script
management
and
runtime
related
issues
(
<a href="https://github.com/w3c/wot-scripting-api/issues/">
https://github.com/w3c/wot-scripting-api/issues/
</a>
)
</li>
</ul>
</section>
<section id="acknowledgements">
<h2 id="c.-acknowledgements">
<span class="secno">
C.
</span>
Acknowledgements
</h2>
<p>
Special
thanks
to
former
editor
Johannes
Hund
<del class="diff-old">(until
August
2017,
when
at
Siemens
AG)
</del>
for
developing
this
specification.
Also,
the
editors
would
like
to
thank
Dave
Raggett,
Matthias
Kovatsch,
Michael
Koster
and
Michael
McCool
for
their
comments
and
guidance.
</p>
</section>
<section id="references" class="appendix">
<h2 id="d.-references">
<span class="secno">
D.
</span>
References
</h2>
<section id="normative-references">
<h3 id="d.1-normative-references">
<span class="secno">
D.1
</span>
Normative
references
</h3>
<dl class="bibliography">
<dt id="bib-ECMASCRIPT">
[ECMASCRIPT]
</dt>
<dd>
<a href="https://tc39.github.io/ecma262/">
<cite>
ECMAScript
Language
Specification
</cite>
</a>.
Ecma
International.
URL:
<a href="https://tc39.github.io/ecma262/">
https://tc39.github.io/ecma262/
</a>
</dd>
<dt id="bib-ENCODING">
[ENCODING]
</dt>
<dd>
<a href="https://encoding.spec.whatwg.org/">
<cite>
Encoding
Standard
</cite>
</a>.
Anne
van
Kesteren.
WHATWG.
Living
Standard.
URL:
<a href="https://encoding.spec.whatwg.org/">
https://encoding.spec.whatwg.org/
</a>
</dd>
<dt id="bib-HTML5">
[HTML5]
</dt>
<dd>
<a href="https://www.w3.org/TR/html5/">
<cite>
HTML5
</cite>
</a>.
Ian
Hickson;
Robin
Berjon;
Steve
Faulkner;
Travis
Leithead;
Erika
Doyle
Navara;
Theresa
O'Connor;
Silvia
Pfeiffer.
W3C.
28
October
2014.
W3C
Recommendation.
URL:
<a href="https://www.w3.org/TR/html5/">
https://www.w3.org/TR/html5/
</a>
</dd>
<dt id="bib-JSON-LD">
[JSON-LD]
</dt>
<dd>
<a href="https://www.w3.org/TR/json-ld/">
<cite>
JSON-LD
1.0
</cite>
</a>.
Manu
Sporny;
Gregg
Kellogg;
Markus
Lanthaler.
W3C.
16
January
2014.
W3C
Recommendation.
URL:
<a href="https://www.w3.org/TR/json-ld/">
https://www.w3.org/TR/json-ld/
</a>
</dd>
<dt id="bib-RFC2119">
[RFC2119]
</dt>
<dd>
<a href="https://tools.ietf.org/html/rfc2119">
<cite>
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</cite>
</a>.
S.
Bradner.
IETF.
March
1997.
Best
Current
Practice.
URL:
<a href="https://tools.ietf.org/html/rfc2119">
https://tools.ietf.org/html/rfc2119
</a>
</dd>
<dt id="bib-TYPESCRIPT">
[TYPESCRIPT]
</dt>
<dd>
<a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md">
<cite>
TypeScript
Language
Specification
</cite>
</a>.
Microsoft.
1
October
2012.
URL:
<a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md">
https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md
</a>
</dd>
<dt id="bib-URL">
[URL]
</dt>
<dd>
<a href="https://url.spec.whatwg.org/">
<cite>
URL
Standard
</cite>
</a>.
Anne
van
Kesteren.
WHATWG.
Living
Standard.
URL:
<a href="https://url.spec.whatwg.org/">
https://url.spec.whatwg.org/
</a>
</dd>
<dt id="bib-WEBAPPSEC">
[WEBAPPSEC]
</dt>
<dd>
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures">
<cite>
Secure
Contexts
</cite>
</a>.
W3C.
17
July
2015.
URL:
<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures">
https://w3c.github.io/webappsec/specs/powerfulfeatures
</a>
</dd>
<dt id="bib-WEBIDL">
[WEBIDL]
</dt>
<dd>
<a href="https://heycam.github.io/webidl/">
<cite>
Web
IDL
</cite>
</a>.
Cameron
McCormack;
Boris
Zbarsky;
Tobie
Langel.
W3C.
15
December
2016.
W3C
Editor's
Draft.
URL:
<a href="https://heycam.github.io/webidl/">
https://heycam.github.io/webidl/
</a>
</dd>
<dt id="bib-WOT-ARCHITECTURE">
[WOT-ARCHITECTURE]
</dt>
<dd>
<a href="https://w3c.github.io/wot-architecture/">
<cite>
Web
of
Things
Architecture
</cite>
</a>.
W3C.
20
August
2017.
URL:
<a href="https://w3c.github.io/wot-architecture/">
https://w3c.github.io/wot-architecture/
</a>
</dd>
</dl>
</section>
</section>
<p role="navigation" id="back-to-top">
<a href="#toc">
<abbr title="Back to Top">
â†‘
</abbr>
</a>
</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js">
</script>
</body>
</html>
